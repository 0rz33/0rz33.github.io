<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    

    <!--Author-->
    
        <meta name="author" content="4ckU">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="0rz33"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="0rz33"/>

    <!--Type page-->
    
        <meta property="og:type" content="website" />
    

    <!--Page Cover-->
    

    
        <meta name="twitter:card" content="summary" />
    
    
    

    <!-- Title -->
    
    <title>page - 0rz33</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/style.css">


    <!-- Google Analytics -->
    


<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about">
                    About
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/tags">
                    Tags
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/categories">
                    Categories
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/contact">
                    Contact
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Searching-->
<div class="search-bg">
    <div class="search-container">
            <div class="alpha-search">
                <form class="site-search-form">
                    <input type="text" id="local-search-input" class="st-search-input" />
                </form>
                <div id="local-search-result">
                </div>
            </div>
        </div>
    </div>
</div> 

<!--Hamburger Icon-->
<search>
    <a href="#search"></a>
</search>
<nav>
    <a href="#menu"></a>
</nav>

<!-- 执行本地搜索脚本 -->
<script>
    var inputArea = document.querySelector("#local-search-input");
    var getSearchFile = function(){
        var path = "/search.xml";
        searchFunc(path, 'local-search-input', 'local-search-result');
    }
    inputArea.onfocus = function(){ getSearchFile() }
    inputArea.onkeydown = function(){ if(event.keyCode==13) return false}
</script>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
            <h1 id="main-title" class="title">0rz33</h1>
        
    </div>
</header>

        <section class="main">
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2025/04/17/ollama/">
                Ollama
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2025-04-17</span>
            
            
            
                <span class="category">
                    <a href="/categories/AI/">AI</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p><code>Ollama</code> 是一个基于 Go 语言开发的简单易用的本地大语言模型运行框架。<br>适用于macOS，Linux，Window，也可使用Docker</p>
<p>模型管理 ：</p>
<ul>
<li><code>ollama list</code> 显示模型列表。</li>
<li><code>ollama show</code> 显示模型的信息</li>
<li><code>ollama pull</code> 拉取模型</li>
<li><code>ollama push</code> 推送模型</li>
<li><code>ollama cp</code>   拷贝一个模型</li>
<li><code>ollama rm</code>   删除一个模型</li>
<li><code>ollama run</code>  运行一个模型</li>
</ul>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><h3 id="下载并使用模型"><a href="#下载并使用模型" class="headerlink" title="下载并使用模型"></a>下载并使用模型</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ollama pull llama3.2 <span class="comment">#下载模型</span></span><br><span class="line">ollama run llama3.2 <span class="comment">#运行模型</span></span><br></pre></td></tr></table></figure>

<h3 id="WebUI-可视化交互"><a href="#WebUI-可视化交互" class="headerlink" title="WebUI 可视化交互"></a><a href="git">WebUI 可视化交互</a></h3><h2 id="微调-改进接近ChatGPT"><a href="#微调-改进接近ChatGPT" class="headerlink" title="微调 - 改进接近ChatGPT"></a>微调 - 改进接近ChatGPT</h2><blockquote>
<p>本机微调<br>docker 微调</p>
</blockquote>
<p>芯片训练（GPU CPU NPU）<br>mac m1 比较特殊 用的是mps来进行训练</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/0rz33/LLAMA-Factory">llama_factory安装</a></li>
<li>llama_factory 运行</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 进入llama_factory docker exec</span></span><br><span class="line">llamafactory-cli <span class="built_in">help</span>  <span class="comment">## 显示帮助信息。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## LLaMA Board 可视化微调</span></span><br><span class="line">llamafactory-cli webui</span><br></pre></td></tr></table></figure>
<ul>
<li>训练模型</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 一般会到huggingface里面注册账户 进行训练</span></span><br><span class="line"><span class="comment">## 里面有很多大容量数据 可以提供训练</span></span><br><span class="line"><span class="comment">## 训练前先登录</span></span><br><span class="line">login </span><br></pre></td></tr></table></figure>

<ul>
<li><p>申请数据接口和模型<br><img src="/images/llama-factory-access.png"></p>
</li>
<li><p>开始训练模型<br><img src="/images/llama-factory-training-1.png"><br><img src="/images/llama-factory-training-2.png"><br><img src="/images/llama-factory-training-3.png"><br><img src="/images/llama-factory-training-4.png"></p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.53ai.com/news/qianyanjishu/2015.html">https://www.53ai.com/news/qianyanjishu/2015.html</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/shanren/p/18251730">https://www.cnblogs.com/shanren/p/18251730</a></p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/mirrors/HuatuoGPT">在线医生</a><br><a target="_blank" rel="noopener" href="https://www.freebuf.com/news/427722.html">“全能黑客工具”Xanthorox AI：自进化AI武器的威胁与防御破局</a></p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2025/04/17/ops-basic/">
                Devops
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2025-04-17</span>
            
            
            
                <span class="category">
                    <a href="/categories/运维/">运维</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p><a target="_blank" rel="noopener" href="https://roadmap.sh/devops">Devops之路</a></p>
<ul>
<li><a href="#%E7%90%90%E7%A2%8E">琐碎</a></li>
<li><a href="#AWS">AWS</a><ul>
<li><a href="#EC2">EC2</a></li>
<li><a href="#Amazon-Linux-2023">Amazon Linux 2023</a></li>
<li><a href="#AWS-%E4%B8%8E-Github-Action">AWS 与 GitHub Action</a></li>
</ul>
</li>
<li><a href="#%E8%BF%9C%E7%A8%8B%E5%A4%9A%E4%BA%BA%E5%90%88%E4%BD%9C%E5%BC%80%E5%8F%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%BF%AB%E9%80%9F%E4%B8%8A%E7%BA%BF%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">远程多人协作开发服务器快速上线解决方案</a><ul>
<li><a href="#SSH-%E6%9D%83%E9%99%90%E4%B8%8E%E7%9B%AE%E5%BD%95%E6%9D%83%E9%99%90%E9%97%AE%E9%A2%98">SSH 权限与目录权限问题</a></li>
<li><a href="#ACL-%E6%9B%B4%E7%BB%86%E7%B2%92%E5%BA%A6%E7%9A%84%E6%9D%83%E9%99%90%E7%AE%A1%E6%8E%A7">ACL 更细粒度的权限管控</a></li>
<li><a href="#%E8%BF%90%E8%A1%8C%E7%9A%84docker%E6%9B%B4%E6%96%B0%E5%9F%BA%E7%A1%80%E5%8A%9F%E8%83%BD">运行的docker更新基础功能</a></li>
<li><a href="#%E4%B8%89%E6%96%B9%E5%B7%A5%E5%85%B7%E9%A1%B9%E7%9B%AE%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%E4%BA%A4%E4%BB%98">三方工具项目持续集成交付</a></li>
<li><a href="#journalctl-%E6%9F%A5%E8%AF%A2%E5%92%8C%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E6%97%A5%E5%BF%97%E5%B7%A5%E5%85%B7">journalctl 查询和管理系统日志工具</a></li>
</ul>
</li>
<li><a href="#%E5%86%85%E9%83%A8%E5%8D%8F%E4%BD%9C%E5%BC%80%E5%8F%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%BA%BF%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">内部协作开发服务器上线解决方案</a></li>
<li><a href="#%E7%A1%AC%E7%9B%98%E5%8A%A8%E6%80%81%E6%89%A9%E5%AE%B9-LVM">硬盘动态扩容 LVM</a><ul>
<li><a href="#%E7%89%A9%E7%90%86%E5%8D%B7-%E5%8D%B7%E7%BB%84-%E9%80%BB%E8%BE%91%E5%8D%B7-%E5%85%B3%E7%B3%BB">物理卷 卷组 逻辑卷 关系</a></li>
<li><a href="#%F0%9F%A7%BE-xfs-vs-ext4%EF%BC%9ALVM-%E4%B8%8B%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E6%AF%94">🧾 xfs vs ext4：LVM 下文件系统对比</a></li>
<li><a href="#%E6%89%A9%E5%AE%B9%E6%AD%A5%E9%AA%A4">扩容步骤</a></li>
<li><a href="#%E6%9C%AA%E6%9D%A5%E6%89%A9%E5%AE%B9%E6%B5%81%E7%A8%8B-%E6%B7%BB%E5%8A%A0%E6%96%B0%E7%A1%AC%E7%9B%98">未来扩容流程 添加新硬盘</a></li>
</ul>
</li>
<li><a href="#Ubuntu">Ubuntu</a></li>
<li><a href="#Centos">Centos</a><ul>
<li><a href="#SELinux">SELinux</a></li>
</ul>
</li>
</ul>
<h1 id="琐碎"><a href="#琐碎" class="headerlink" title="琐碎"></a>琐碎</h1><h3 id="国内访问国外服务器加速BBR-（bbr魔改脚本）"><a href="#国内访问国外服务器加速BBR-（bbr魔改脚本）" class="headerlink" title="国内访问国外服务器加速BBR -（bbr魔改脚本）"></a>国内访问国外服务器加速BBR -（bbr魔改脚本）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://gist.githubusercontent.com/zeruns/a0ec603f20d1b86de6a774a8ba27588f/raw/4f9957ae23f5efb2bb7c57a198ae2cffebfb1c56/tcp.sh</span><br></pre></td></tr></table></figure>


<h3 id="域名重定向"><a href="#域名重定向" class="headerlink" title="域名重定向"></a>域名重定向</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">加cdn ssl 加载证书</span><br><span class="line">网站删除后在添加证书 证书不一致 会造成重定向</span><br><span class="line">cdn回溯？？</span><br></pre></td></tr></table></figure>

<h3 id="nginx-header跨域问题"><a href="#nginx-header跨域问题" class="headerlink" title="nginx - header跨域问题"></a>nginx - header跨域问题</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">关键字大写</span><br><span class="line">在ng上加 </span><br><span class="line">add_header Access-Control-Allow-Headers <span class="string">&#x27;DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization,Token&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="nginx-404"><a href="#nginx-404" class="headerlink" title="nginx - 404"></a>nginx - 404</h3><p>指定目录 &#x2F;home&#x2F;dev1&#x2F;www</p>
<p>dev1 属于dev1<br>www 属于www<br>会有404报错 找不到文件 因为在dev1就已经进不去了</p>
<h3 id="session-问题-》CDN"><a href="#session-问题-》CDN" class="headerlink" title="session 问题 -》CDN"></a>session 问题 -》CDN</h3><p>由于Session数据存储在服务器端，而CDN节点是分布式的，<br>因此在多个节点之间共享Session数据时，可能会出现数据不一致的情况。<br>这主要是因为Session数据是基于服务器的，而CDN节点是基于客户端的，<br>因此在不同节点之间进行数据同步时，可能会出现延迟或者丢失的情况。</p>
<p>解决办法：<br>用redis存储session</p>
<h3 id="进程守护-Systemd"><a href="#进程守护-Systemd" class="headerlink" title="进程守护 Systemd"></a>进程守护 Systemd</h3><h1 id="AWS"><a href="#AWS" class="headerlink" title="AWS"></a>AWS</h1><pre class="mermaid">graph TB
    A[计算] --EC2--> B[操作系统]
    B[操作系统] --网络与安全--> C[安全组-端口]
    B[操作系统] --存储(扩容)--> D[S3]
    B[操作系统] --安全性，身份--> E[IAM-资源访问与授权]</pre>

<h2 id="EC2"><a href="#EC2" class="headerlink" title="EC2"></a>EC2</h2><h3 id="Amazon-Linux-2023"><a href="#Amazon-Linux-2023" class="headerlink" title="Amazon Linux 2023"></a>Amazon Linux 2023</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 将用户 myuser 添加到 developer 组</span></span><br><span class="line"><span class="built_in">sudo</span> usermod -aG developer myuser</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看 developer 组的所有成员</span></span><br><span class="line">getent group developer</span><br><span class="line"></span><br><span class="line"><span class="comment">### developer 组改为dev-backend组</span></span><br><span class="line"><span class="comment">## 1. 创建 dev-backend 组</span></span><br><span class="line"><span class="built_in">sudo</span> groupadd dev-backend</span><br><span class="line"></span><br><span class="line"><span class="comment">## 2. 将用户从 developer 组转移到 dev-backend 组</span></span><br><span class="line"><span class="comment"># passwd 或 usermod 来移除用户</span></span><br><span class="line"><span class="built_in">sudo</span> gpasswd -d username developer</span><br><span class="line"></span><br><span class="line"><span class="comment"># usermod 命令将该用户添加到 dev-backend 组</span></span><br><span class="line"><span class="built_in">sudo</span> usermod -aG dev-backend username</span><br><span class="line"></span><br><span class="line"><span class="comment">## 删除 developer 组</span></span><br><span class="line"><span class="built_in">sudo</span> groupdel developer</span><br><span class="line"></span><br><span class="line"><span class="comment">## 权限</span></span><br><span class="line"><span class="comment"># 将 /docker/dnmp/www/backend 目录的组更改为 developer</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chown</span> -R :dev-backend /docker/dnmp/www/backend</span><br></pre></td></tr></table></figure>


<h3 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 400 XX.pem</span><br><span class="line">ssh -i /XX/XX.pem [user]@[公有 IPv4 DNS]</span><br></pre></td></tr></table></figure>


<h3 id="Docker-开发"><a href="#Docker-开发" class="headerlink" title="Docker 开发"></a>Docker 开发</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## docker</span></span><br><span class="line"><span class="built_in">sudo</span> yum update -y</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> yum install -y docker</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> systemctl start docker</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> usermod -a -G docker ec2-user</span><br><span class="line"></span><br><span class="line"><span class="comment">## docker-compose</span></span><br><span class="line"><span class="built_in">sudo</span> curl -L https://github.com/docker/compose/releases/latest/download/docker-compose-$(<span class="built_in">uname</span> -s)-$(<span class="built_in">uname</span> -m) -o /usr/local/bin/docker-compose</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> +x /usr/local/bin/docker-compose</span><br><span class="line"></span><br><span class="line">docker-compose version</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> /docker</span><br></pre></td></tr></table></figure>


<h3 id="Docker-开发者-【test】"><a href="#Docker-开发者-【test】" class="headerlink" title="Docker 开发者 【test】"></a>Docker 开发者 【test】</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">docker run -dit --name dev-container -p 2222:22 ubuntu:22.04 bash</span><br><span class="line"></span><br><span class="line">docker <span class="built_in">exec</span> -it dev-container bash</span><br><span class="line"></span><br><span class="line">apt update &amp;&amp; apt install -y openssh-server vim</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> /run/sshd</span><br><span class="line"></span><br><span class="line">vi /etc/ssh/sshd_config</span><br><span class="line"><span class="comment">## vi</span></span><br><span class="line">PermitRootLogin <span class="built_in">yes</span></span><br><span class="line">PasswordAuthentication <span class="built_in">yes</span></span><br><span class="line"><span class="comment">## vi</span></span><br><span class="line"></span><br><span class="line">passwd root</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 开用户devuser</span></span><br><span class="line">useradd -m -s /bin/bash devuser</span><br><span class="line">passwd devuser </span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> /home/devuser/.ssh</span><br><span class="line"><span class="built_in">chown</span> -R devuser:devuser /home/devuser/.ssh</span><br><span class="line"><span class="built_in">chmod</span> 700 /home/devuser/.ssh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果容器已经在运行并且端口已经映射（如 2222:22），则可以跳过此步骤。如果没有，请确保在运行容器时正确映射端口：</span></span><br><span class="line">docker run -dit --name dev-container -p 2222:22 ubuntu:22.04 bash</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="mysql-开发"><a href="#mysql-开发" class="headerlink" title="mysql 开发"></a>mysql 开发</h3><p>GRANT ALL PRIVILEGES ON hl_develop_db.* TO ‘hl‘@’%’;<br>FLUSH PRIVILEGES;</p>
<h2 id="AWS-与-Github-Action"><a href="#AWS-与-Github-Action" class="headerlink" title="AWS 与 Github Action"></a>AWS 与 Github Action</h2><p><img src="/images/github-cicd.png"></p>
<h3 id="OpenID-Connect-OIDC-的云提供商提供的资源"><a href="#OpenID-Connect-OIDC-的云提供商提供的资源" class="headerlink" title="OpenID Connect (OIDC) 的云提供商提供的资源"></a>OpenID Connect (OIDC) 的云提供商提供的资源</h3><p>如果 GitHub Actions 工作流需要访问支持 OpenID Connect (OIDC) 的云提供商提供的资源，则可以将工作流配置为直接向云提供商进行身份验证。 这样就可以停止将这些凭据存储为长期存在的机密，并提供其他安全优势。</p>
<h3 id="在-Amazon-Web-Services-中配置-OpenID-Connect"><a href="#在-Amazon-Web-Services-中配置-OpenID-Connect" class="headerlink" title="在 Amazon Web Services 中配置 OpenID Connect"></a>在 <a target="_blank" rel="noopener" href="https://docs.github.com/zh/actions/security-for-github-actions/security-hardening-your-deployments/configuring-openid-connect-in-amazon-web-services">Amazon Web Services 中配置 OpenID Connect</a></h3><p><a target="_blank" rel="noopener" href="https://docfunc.com/posts/114/%E5%9C%A8-github-action-%E4%B8%AD%E4%BD%BF%E7%94%A8-oidc-%E5%8F%96%E5%BE%97%E6%93%8D%E4%BD%9C-aws-%E8%B3%87%E6%BA%90%E7%9A%84%E6%AC%8A%E9%99%90-post#heading-2">在 GitHub Action 中使用 OIDC 取得操作 AWS 資源的權限</a></p>
<h3 id="AWS中的IAM是什么"><a href="#AWS中的IAM是什么" class="headerlink" title="AWS中的IAM是什么"></a>AWS中的IAM是什么</h3><p>权限控制有两个基本概念：</p>
<ul>
<li>Authentication - 确认是否为有效用户，是否允许登录&#x2F;接入</li>
<li>Authorization - 确认用户当前请求的操作（读写资源），是否合法</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/introduction_attribute-based-access-control.html">ABAC与RBAC模型比较</a></p>
<p>IAM Identity Center 通过创建 IAM 角色，向用户提供资源访问权限。当您分配权限集时，IAM Identity Center 会在每个账户中创建由 IAM Identity Center 控制的相应 IAM 角色，并将权限集中指定的策略附加给这些角色。IAM Identity Center 管理角色，并允许您定义的授权用户使用 AWS 访问门户或代入该角色。 AWS CLI在您修改权限集时，IAM Identity Center 会确保相应的 IAM 策略和角色也相应更新。</p>
<p>如果你开发的系统需要操作 AWS 资源，比如说上传文件到 S3，那你需要用的是 Federated User。通过 OpenID Connect（如 Google&#x2F;Facebook）或者 SAML 2.0（如 Microsoft AD），你的系统用户可以在登录后换取代表某个 AWS Role 的临时 token 来访问 AWS 资源。</p>
<h1 id="远程多人合作开发服务器快速上线解决方案"><a href="#远程多人合作开发服务器快速上线解决方案" class="headerlink" title="远程多人合作开发服务器快速上线解决方案"></a>远程多人合作开发服务器快速上线解决方案</h1><ul>
<li>多人协作不同项目<br>建议：开多个账户，docker用于多个项目不同服务</li>
<li>多人协作同一项目<br>建议：开多个账户，自己安装服务然后开多个服务账户</li>
<li>持续备份</li>
</ul>
<h2 id="SSH-权限与目录权限问题"><a href="#SSH-权限与目录权限问题" class="headerlink" title="SSH 权限与目录权限问题"></a>SSH 权限与目录权限问题</h2><h3 id="使用公钥登陆"><a href="#使用公钥登陆" class="headerlink" title="使用公钥登陆"></a>使用公钥登陆</h3><ol>
<li>SSH 服务的配置<br>登录到服务器并检查 SSH 配置文件 <code>/etc/ssh/sshd_config</code></li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PubkeyAuthentication <span class="built_in">yes</span></span><br><span class="line">AuthorizedKeysFile .ssh/authorized_keys</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新启动 SSH 服务：</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl restart sshd</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>加入对于的 <code>/home/user/.ssh/authorized_keys</code></li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;XXXX&quot;</span> &gt;&gt; ~/.ssh/authorized_keys</span><br><span class="line"></span><br><span class="line"><span class="comment"># authorized_keys 文件权限是正确的</span></span><br><span class="line"><span class="built_in">chmod</span> 600 ~/.ssh/authorized_keys</span><br><span class="line"><span class="built_in">chmod</span> 700 ~/.ssh</span><br></pre></td></tr></table></figure>

<h3 id="文件权限问题"><a href="#文件权限问题" class="headerlink" title="文件权限问题"></a>文件权限问题</h3><ul>
<li>主使用者加入 <code>root</code> 组</li>
<li>想使用的可以加入特殊组 如 <code>developer</code> 组</li>
<li>每个文件都要去定义（重点）</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> 770 /docker/dnmp/www/localhost</span><br></pre></td></tr></table></figure>
<p>解释：</p>
<ul>
<li>770 表示权限设置为：<ul>
<li>所有者（root）：rwx（读、写、执行）</li>
<li>用户组（root）：rwx（读、写、执行）</li>
<li>其他用户（other）：—（没有任何权限）</li>
</ul>
</li>
</ul>
<h2 id="ACL-更细粒度的权限管控"><a href="#ACL-更细粒度的权限管控" class="headerlink" title="ACL 更细粒度的权限管控"></a>ACL 更细粒度的权限管控</h2><p>创建用户和用户组</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/0rz33/opts-tools/blob/main/interactive_acl_multiple_users.sh</span><br></pre></td></tr></table></figure>

<h2 id="三方工具项目持续集成交付"><a href="#三方工具项目持续集成交付" class="headerlink" title="三方工具项目持续集成交付"></a>三方工具项目持续集成交付</h2><h3 id="Github-CICD-（nodejs案例）"><a href="#Github-CICD-（nodejs案例）" class="headerlink" title="Github CICD （nodejs案例）"></a>Github CICD （nodejs案例）</h3><p><code>.github/workflows/deploy.yml</code></p>
<p>SSH_PRIVATE_KEY 获取<br>服务器 生成 <code>id_rsa</code> 密钥对</p>
<p>id_rsa -&gt; github -&gt; SSH_PRIVATE_KEY<br>id_rsa.pub -&gt; 服务器 <code>~/.ssh/authorized_keys</code></p>
<p>丢弃本地修改，直接同步远程 <code>dev</code>，适用于 CI&#x2F;CD 或无状态环境</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- name: Sync with dev branch</span><br><span class="line">  run: |</span><br><span class="line">    git fetch origin dev</span><br><span class="line">    git reset --hard origin/dev</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">name: Deploy to Server</span><br><span class="line"></span><br><span class="line">on:</span><br><span class="line">  push:</span><br><span class="line">    branches:</span><br><span class="line">      - dev</span><br><span class="line"></span><br><span class="line"><span class="built_in">jobs</span>:</span><br><span class="line">  deploy:</span><br><span class="line">    runs-on: ubuntu-latest</span><br><span class="line">    permissions:  <span class="comment"># 添加这部分</span></span><br><span class="line">      id-token: write</span><br><span class="line">      contents: <span class="built_in">read</span></span><br><span class="line">    steps:</span><br><span class="line">    - name: Checkout code</span><br><span class="line">      uses: actions/checkout@v4</span><br><span class="line"></span><br><span class="line">    - name: Set up Node.js</span><br><span class="line">      uses: actions/setup-node@v4</span><br><span class="line">      with:</span><br><span class="line">        node-version: 23</span><br><span class="line">        cache: <span class="string">&#x27;yarn&#x27;</span></span><br><span class="line"></span><br><span class="line">    - name: Install dependencies</span><br><span class="line">      run: yarn install</span><br><span class="line"></span><br><span class="line">    - name: Build project (<span class="keyword">if</span> needed)</span><br><span class="line">      run: yarn build</span><br><span class="line"></span><br><span class="line">    - name: Set up SSH key</span><br><span class="line">      uses: webfactory/ssh-agent@v0.5.3</span><br><span class="line">      with:</span><br><span class="line">        ssh-private-key: <span class="variable">$&#123;&#123; secrets.SSH_PRIVATE_KEY &#125;</span>&#125;</span><br><span class="line"></span><br><span class="line">    - name: Install PHP dependencies</span><br><span class="line">      <span class="built_in">env</span>:</span><br><span class="line">        AWS_ADDRESS: <span class="variable">$&#123;&#123; secrets.AWS_ADDRESS &#125;</span>&#125;</span><br><span class="line">      run: |</span><br><span class="line">        ssh -o StrictHostKeyChecking=no  ec2-user@<span class="variable">$AWS_ADDRESS</span> &lt;&lt; <span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">          <span class="built_in">cd</span> /docker/dnmp/www/frontend</span><br><span class="line">          git fetch origin dev </span><br><span class="line">          git reset --hard origin/dev</span><br><span class="line">          docker run --<span class="built_in">rm</span> -v $(<span class="built_in">pwd</span>):/www/frontend -w /www/frontend dnmp-node23 yarn install </span><br><span class="line">          docker run --<span class="built_in">rm</span> -v $(<span class="built_in">pwd</span>):/www/frontend -w /www/frontend dnmp-node23 yarn build</span><br><span class="line">        EOF</span><br></pre></td></tr></table></figure>

<h2 id="运行的docker更新基础功能"><a href="#运行的docker更新基础功能" class="headerlink" title="运行的docker更新基础功能"></a>运行的docker更新基础功能</h2><h2 id="journalctl-查询和管理系统日志工具"><a href="#journalctl-查询和管理系统日志工具" class="headerlink" title="journalctl 查询和管理系统日志工具"></a>journalctl 查询和管理系统日志工具</h2><p>journalctl 是 Linux 系统中用于查询和管理系统日志的一种工具，主要用于与 systemd journal 日志系统进行交互。systemd 是现代 Linux 系统的初始化系统和服务管理器，而 systemd journal 是 systemd 提供的日志记录功能，用于收集和存储系统服务和应用程序的日志信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 你可以通过 -u 参数查看特定服务的日志，例如查看 MongoDB 服务的日志</span></span><br><span class="line">journalctl -u mongod</span><br><span class="line"></span><br><span class="line"><span class="comment"># 实时查看日志（类似 tail -f）</span></span><br><span class="line">journalctl -f</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看内核日志： 通过 -k 参数</span></span><br><span class="line">journalctl -k</span><br></pre></td></tr></table></figure>

<h1 id="内部协作开发服务器上线解决方案"><a href="#内部协作开发服务器上线解决方案" class="headerlink" title="内部协作开发服务器上线解决方案"></a>内部协作开发服务器上线解决方案</h1><ul>
<li>使用git仓库</li>
<li>CI&#x2F;CD持续集成</li>
<li>测试介入</li>
<li>项目管理</li>
</ul>
<h1 id="硬盘动态扩容-LVM"><a href="#硬盘动态扩容-LVM" class="headerlink" title="硬盘动态扩容 LVM"></a>硬盘动态扩容 LVM</h1><p>查看指定目录的大小</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">du</span> -sh /XXX</span><br></pre></td></tr></table></figure>

<p>传统的文件系统是基于分区的, 一个文件系统对应一个分区, 这种方式比较直观, 但不易改变：</p>
<ol>
<li>不同的分区相互独立, 单独的文件不能跨分区存储, 容易出现硬盘的利用率不均衡;</li>
<li>当一个文件系统&#x2F;分区装满时, 是不能对其进行扩容的, 只能采用重新分区&#x2F;建立文件系统, 重新分区会丢失数据, 就要<br>  ① 做数据的迁移和备份;<br>  ② 或者把分区中的数据移到另一个更大的分区中;<br>  ③ 或者采用符号连接的方式使用其它分区的空间 —— 都非常麻烦;</li>
<li>如果要把硬盘上的多个分区合并在一起使用, 只能采用重新分区的方式, —— 需要做好数据的备份与恢复.</li>
</ol>
<h2 id="物理卷-卷组-逻辑卷-关系"><a href="#物理卷-卷组-逻辑卷-关系" class="headerlink" title="物理卷 卷组 逻辑卷 关系"></a>物理卷 卷组 逻辑卷 关系</h2><h2 id="🧾-xfs-vs-ext4：LVM-下文件系统对比"><a href="#🧾-xfs-vs-ext4：LVM-下文件系统对比" class="headerlink" title="🧾 xfs vs ext4：LVM 下文件系统对比"></a>🧾 xfs vs ext4：LVM 下文件系统对比</h2><table>
<thead>
<tr>
<th><strong>特性</strong></th>
<th><strong><code>xfs</code>（推荐用于 LVM）</strong></th>
<th><strong><code>ext4</code>（通用稳定）</strong></th>
</tr>
</thead>
<tbody><tr>
<td>📦 文件系统最大支持</td>
<td>数 PB（更大）</td>
<td>通常为几十 TB，略小于 XFS</td>
</tr>
<tr>
<td>📈 在线扩容</td>
<td>✅ 支持（使用 <code>xfs_growfs</code>）</td>
<td>✅ 支持（使用 <code>resize2fs</code>）</td>
</tr>
<tr>
<td>🔄 在线缩容</td>
<td>❌ 不支持（需重建）</td>
<td>✅ 支持（但过程较复杂）</td>
</tr>
<tr>
<td>🚀 性能表现</td>
<td>更适合大文件、高并发写入场景</td>
<td>通用场景表现良好，小文件表现更均衡</td>
</tr>
<tr>
<td>🧮 inode 处理</td>
<td>inode 动态分配，适合超多小文件或海量目录</td>
<td>inode 固定分配，创建时需估算数量</td>
</tr>
<tr>
<td>🔐 日志机制</td>
<td>高效日志写入机制，可靠性好</td>
<td>稳定日志机制，但写入效率略低</td>
</tr>
<tr>
<td>🧰 工具兼容性</td>
<td>RHEL&#x2F;CentOS 默认文件系统，企业级支持多</td>
<td>更广泛兼容于桌面和轻量发行版系统</td>
</tr>
<tr>
<td>🛠️ 文件系统工具</td>
<td><code>xfs_growfs</code>, <code>xfs_repair</code></td>
<td><code>resize2fs</code>, <code>e2fsck</code>, <code>tune2fs</code> 等</td>
</tr>
</tbody></table>
<h2 id="扩容步骤"><a href="#扩容步骤" class="headerlink" title="扩容步骤"></a>扩容步骤</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 安装 LVM 工具</span></span><br><span class="line"><span class="built_in">sudo</span> dnf install lvm2</span><br><span class="line"></span><br><span class="line"><span class="comment">## ① 卸载旧挂载点</span></span><br><span class="line"><span class="built_in">sudo</span> umount /data1</span><br><span class="line"><span class="built_in">sudo</span> umount /data2</span><br><span class="line"></span><br><span class="line"><span class="comment">## ② 清除旧文件系统签名（⚠️ 数据会被清空）</span></span><br><span class="line"><span class="built_in">sudo</span> wipefs -a /dev/vdb1</span><br><span class="line"><span class="built_in">sudo</span> wipefs -a /dev/vdc1</span><br><span class="line"></span><br><span class="line"><span class="comment">## ③ 创建 LVM</span></span><br><span class="line"><span class="comment"># 初始化物理卷</span></span><br><span class="line"><span class="built_in">sudo</span> pvcreate /dev/vdb1 /dev/vdc1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建卷组 datavg</span></span><br><span class="line"><span class="built_in">sudo</span> vgcreate datavg /dev/vdb1 /dev/vdc1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建逻辑卷 datalv，使用全部空间</span></span><br><span class="line"><span class="built_in">sudo</span> lvcreate -l 100%FREE -n datalv datavg</span><br><span class="line"></span><br><span class="line"><span class="comment"># 格式化为 xfs 文件系统（推荐用于 LVM）</span></span><br><span class="line"><span class="built_in">sudo</span> mkfs.xfs /dev/datavg/datalv</span><br><span class="line"></span><br><span class="line"><span class="comment">## ④ 创建挂载点并挂载</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p /data</span><br><span class="line"><span class="built_in">sudo</span> mount /dev/datavg/datalv /data</span><br><span class="line"></span><br><span class="line"><span class="comment">## ⑤ 设置开机自动挂载</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;/dev/datavg/datalv /data xfs defaults 0 0&#x27;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> -a /etc/fstab</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>✅ 验收</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">df</span> -hT /data</span><br><span class="line">lsblk</span><br></pre></td></tr></table></figure>

<h2 id="未来扩容流程-添加新硬盘"><a href="#未来扩容流程-添加新硬盘" class="headerlink" title="未来扩容流程 添加新硬盘"></a>未来扩容流程 添加新硬盘</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 为磁盘创建 GPT 分区表</span></span><br><span class="line"><span class="built_in">sudo</span> parted /dev/vdd -- mklabel gpt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个新的分区，整个磁盘用作 xfs 文件系统</span></span><br><span class="line"><span class="built_in">sudo</span> parted -a optimal /dev/vdd -- mkpart primary xfs 0% 100%</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加入 LVM</span></span><br><span class="line"><span class="built_in">sudo</span> pvcreate /dev/vdd1  <span class="comment">## pv</span></span><br><span class="line"><span class="built_in">sudo</span> vgextend datavg /dev/vdd1 <span class="comment">## vg</span></span><br><span class="line"><span class="built_in">sudo</span> lvextend -l +100%FREE /dev/datavg/datalv <span class="comment">## lv</span></span><br><span class="line"><span class="built_in">sudo</span> xfs_growfs /data</span><br></pre></td></tr></table></figure>

<h1 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h1><h1 id="Centos"><a href="#Centos" class="headerlink" title="Centos"></a>Centos</h1><h2 id="SELinux"><a href="#SELinux" class="headerlink" title="SELinux"></a>SELinux</h2><p>SELinux（Security-Enhanced Linux）是由美国国家安全局（NSA）开发的一个 Linux 内核安全模块。它为 Linux 系统提供了强制访问控制（MAC）功能，目的是提高操作系统的安全性，防止不良程序或攻击者对系统造成危害</p>
<p>SELinux 和 ACL 的对比</p>
<table>
<thead>
<tr>
<th><strong>特性</strong></th>
<th><strong>SELinux</strong></th>
<th><strong>ACL</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>控制模型</strong></td>
<td>强制访问控制（MAC）</td>
<td>自主访问控制（DAC）</td>
</tr>
<tr>
<td><strong>控制粒度</strong></td>
<td>对进程、文件、网络端口等的 <strong>全局控制</strong></td>
<td>对文件和目录的 <strong>访问控制</strong></td>
</tr>
<tr>
<td><strong>安全性</strong></td>
<td>高，具有强制性控制，即使是 root 用户也无法绕过</td>
<td>相对较低，root 用户可以修改 ACL 配置，权限可被绕过</td>
</tr>
<tr>
<td><strong>管理方式</strong></td>
<td>使用策略文件和安全上下文进行管理，需要额外工具（如 <code>semanage</code>）</td>
<td>使用命令行工具（如 <code>setfacl</code>、<code>getfacl</code>）直接管理文件和目录</td>
</tr>
<tr>
<td><strong>配置复杂度</strong></td>
<td>配置复杂，适合需要强安全性控制的环境</td>
<td>配置简单，适合文件级别的用户权限管理</td>
</tr>
<tr>
<td><strong>适用场景</strong></td>
<td>需要强制控制、进程间权限管理的高安全性环境</td>
<td>多用户环境中的文件和目录权限控制</td>
</tr>
<tr>
<td><strong>功能</strong></td>
<td>控制进程与文件、进程与进程之间的访问权限</td>
<td>控制文件和目录对不同用户的访问权限</td>
</tr>
<tr>
<td><strong>示例</strong></td>
<td>设置文件上下文：<br> <code>sudo semanage fcontext -a -t httpd_sys_content_t &quot;/var/www/html(/.*)?&quot;</code><br> <code>sudo restorecon -Rv /var/www/html</code></td>
<td>设置文件 ACL：<br> <code>sudo setfacl -m u:username:rwx file.txt</code></td>
</tr>
</tbody></table>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2025/04/17/ops-interview/">
                运维面试题
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2025-04-17</span>
            
            
            
                <span class="category">
                    <a href="/categories/面试/">面试</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <ol>
<li>Linux如何挂载windows下的共享目录？</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mount.cifs //IP地址/server /mnt/server -o user=administrator,password=123456</span><br><span class="line"><span class="comment"># linux 下的server需要自己手动建一个 后面的user与pass 是windows主机的账号和密码 注意空格 和逗号</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>如何查看http的并发请求数与其TCP连接状态？</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">netstat -n | awk ‘/^tcp/ &#123;++b[<span class="variable">$NF</span>]&#125;’ END &#123;<span class="keyword">for</span>(a <span class="keyword">in</span> b) <span class="built_in">print</span> a,b[a]&#125;’</span><br><span class="line"></span><br><span class="line"><span class="built_in">ulimit</span> -n <span class="comment"># 查看linux系统打开最大的文件描述符，这里默认1024，不修改这里web服务器修改再大也没用。若要用就修改很几个办法，这里说其中一个：</span></span><br><span class="line">修改/etc/security/limits.conf</span><br><span class="line">* soft nofile 10240</span><br><span class="line">* hard nofile 10240</span><br><span class="line">重启后生效</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>如何用tcpdump嗅探80端口的访问看看谁最高？</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump -i eth0 -tnn dst port 80 -c 1000 | awk -F”.” ‘&#123;<span class="built_in">print</span> <span class="variable">$1</span>″.”<span class="variable">$2</span>″.”<span class="variable">$3</span>″.”<span class="variable">$4</span>″.”&#125;’ | <span class="built_in">sort</span> |<span class="built_in">uniq</span> -c | <span class="built_in">sort</span> -nr | head-5</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>如何查看&#x2F;var&#x2F;log目录下的文件数？</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> /var/log/ -1R | grep “-” | <span class="built_in">wc</span> -l</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>如何查看Linux系统每个ip的连接数？</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -n | awk ‘/^tcp/ &#123;<span class="built_in">print</span> <span class="variable">$5</span>&#125;’ | awk -F: ‘&#123;<span class="built_in">print</span> <span class="variable">$1</span>&#125;’ | <span class="built_in">sort</span> | <span class="built_in">uniq</span> -c | <span class="built_in">sort</span> -rn</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>shell下生成32位随机密码？</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /dev/urandom | <span class="built_in">head</span> -1 | <span class="built_in">md5sum</span> | <span class="built_in">head</span> -c 32 &gt;&gt; /pass</span><br></pre></td></tr></table></figure>

<ol start="7">
<li>统计出apache的access.log中访问量最多的5个ip？</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> access.log | awk ‘&#123;<span class="built_in">print</span> <span class="variable">$1</span>&#125;’ | <span class="built_in">sort</span> | <span class="built_in">uniq</span> -c | <span class="built_in">sort</span> -n -r | <span class="built_in">head</span> -5</span><br></pre></td></tr></table></figure>
<ol start="8">
<li>如何查看二进制文件的内容？</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 我们一般通过hexdump命令 来查看二进制文件的内容。</span></span><br><span class="line">hexdump -C XXX(文件名) -C是参数 不同的参数有不同的意义</span><br><span class="line"><span class="comment"># -C 是比较规范的 十六进制和ASCII码显示</span></span><br><span class="line"><span class="comment"># -c 是单字节字符显示</span></span><br><span class="line"><span class="comment"># -b 单字节八进制显示</span></span><br><span class="line"><span class="comment"># -o 是双字节八进制显示</span></span><br><span class="line"><span class="comment"># -d 是双字节十进制显示</span></span><br><span class="line"><span class="comment"># -x 是双字节十六进制显示</span></span><br></pre></td></tr></table></figure>

<ol start="9">
<li>ps aux 中的VSZ代表什么意思，RSS代表什么意思？</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">**VSZ：**虚拟内存集，进程占用的虚拟内存空间。</span><br><span class="line"></span><br><span class="line">**RSS：**物理内存集，进程战用实际物理内存空间。</span><br></pre></td></tr></table></figure>

<ol start="10">
<li>如何检测并修复&#x2F;dev&#x2F;hda5？</li>
</ol>
<p><code>fsck</code>用来检查和维护不一致的文件系统。若系统掉电或磁盘发生问题，可利用<code>fsck</code>命令对文件系统进行检查。</p>
<ol start="11">
<li>介绍下Linux系统的开机启动顺序？</li>
</ol>
<p>加载BIOS–&gt;读取MBR–&gt;Boot Loader–&gt;加载内核–&gt;用户层init一句inittab文件来设定系统运行的等级(一般3或者5，3是多用户命令行，5是界面)–&gt;init进程执行rc.syninit–&gt;启动内核模块–&gt;执行不同级别运行的脚本程序–&gt;执行&#x2F;etc&#x2F;rc.d&#x2F;rc.local(本地运行服务)–&gt;执行&#x2F;bin&#x2F;login，就可以登录了。</p>
<ol start="12">
<li>符号链接与硬链接的区别？<br>我们可以把符号链接，也就是软连接，当做是 Windows系统里的快捷方式。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 硬链接 就好像是 又复制了一份，举例说明：</span></span><br><span class="line"><span class="built_in">ln</span> 3.txt 4.txt <span class="comment"># 这是硬链接，相当于复制，不可以跨分区，但修改3，4会跟着变，若删除3，4不受任何影响。</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">ln</span> -s 3.txt 4.txt <span class="comment"># 这是软连接，相当于快捷方式。修改4，3也会跟着变，若删除3，4就坏掉了，不可以用了。</span></span><br></pre></td></tr></table></figure>

<ol start="13">
<li>保存当前磁盘分区的分区表？</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dd</span> <span class="comment"># 命令是以个强大的命令，在复制的同时进行转换。</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/sda of=./mbr.txt bs=1 count=512</span><br></pre></td></tr></table></figure>

<ol start="14">
<li>如何在文本里面进行复制、粘贴，删除行，删除全部，按行查找和按字母查找？</li>
</ol>
<p>以下操作全部在命令行状态操作，不要在编辑状态操作。<br>在文本里移动到想要复制的行 按 yy 想复制到哪就移动到哪，然后按 <code>P</code> 就粘贴了。<br>删除行 移动到改行 按<code>dd</code>。</p>
<p>删除全部 <code>dG</code> 这里注意G一定要大写。</p>
<p>按行查找<code>：90</code> 这样就是找到第90行。</p>
<p>按字母查找 <code>/path</code> 这样就是 找到path这个单词所在的位置，文本里可能存在多个,多次查找会显示在不同的位置。</p>
<ol start="15">
<li>手动安装grub？</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub-install /dev/sda</span><br></pre></td></tr></table></figure>
<ol start="16">
<li>修改内核参数？</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysctl.conf <span class="comment"># 这里修改参数</span></span><br><span class="line">sysctl -p <span class="comment"># 刷新后可用</span></span><br></pre></td></tr></table></figure>

<ol start="17">
<li>在1-39内取随机数？</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">expr</span> $[RANDOM%39] +1</span><br><span class="line"><span class="comment"># RANDOM随机数</span></span><br><span class="line"><span class="comment"># %39取余数范围0-38</span></span><br></pre></td></tr></table></figure>

<ol start="18">
<li>限制apache每秒新建连接数为1，峰值为3？</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 每秒新建连接数一般都是由防火墙来做，apache本身好像无法设置每秒新建连接数，只能设置最大连接：</span></span><br><span class="line">iptables -A INPUT -d 172.16.100.1 -p tcp –dport 80 -m <span class="built_in">limit</span> –<span class="built_in">limit</span> 1/second -j ACCEPT</span><br></pre></td></tr></table></figure>

<ol start="19">
<li>FTP的主动模式和被动模式</li>
</ol>
<p>FTP协议有两种工作方式：PORT方式和PASV方式，中文意思为主动式和被动式。</p>
<p>PORT（主动）方式的连接过程是：客户端向服务器的FTP端口（默认是21）发送连接请求，服务器接受连接，建立一条命令链路。当需要传送数据时，客户端在命令链路上用 PORT 命令告诉服务器：“我打开了XX端口，你过来连接我”。于是服务器从20端口向客户端的 XX 端口发送连接请求，建立一条数据链路来传送数据。</p>
<p>PASV（被动）方式的连接过程是：客户端向服务器的FTP端口（默认是21）发送连接请求，服务器接受连接，建立一条命令链路。当需要传送数据时，服务器在命令链路上用 PASV 命令告诉客户端：“我打开了XX端口，你过来连接我”。于是客户端向服务器的 XX 端口发送连接请求，建立一条数据链路来传送数据。</p>
<p>从上面可以看出，两种方式的命令链路连接方法是一样的，而数据链路的建立方法就完全不同。</p>
<ol start="20">
<li>显示&#x2F;etc&#x2F;inittab中以#开头，且后面跟了一个或者多个空白字符，而后又跟了任意非空白字符的行？</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep “^#&#123;1,&#125;[^]” /etc/inittab</span><br></pre></td></tr></table></figure>

<ol start="21">
<li>显示&#x2F;etc&#x2F;inittab中包含了：一个数字：(即两个冒号中间一个数字)的行？</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep “:[0-9]&#123;1&#125;:” /etc/inittab</span><br></pre></td></tr></table></figure>

<ol start="22">
<li>怎么把脚本添加到系统服务里，即用service来调用？</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在脚本里加入：</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">chkconfig: 345 85 15</span><br><span class="line">description: httpd</span><br><span class="line"><span class="comment"># 然后保存，chkconfig httpd –add 创建系统服务，现在就可以使用service 来 start or restart。</span></span><br></pre></td></tr></table></figure>

<ol start="23">
<li>写一个脚本，实现批量添加20个用户，用户名为user01-20，密码为user后面跟5个随机字符？</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#description: useradd</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">seq</span> -f”%02g” 1 20`;<span class="keyword">do</span></span><br><span class="line">useradd user<span class="variable">$i</span></span><br><span class="line"><span class="built_in">echo</span> “user<span class="variable">$i</span>-`<span class="built_in">echo</span> <span class="variable">$RANDOM</span>|<span class="built_in">md5sum</span>|<span class="built_in">cut</span> -c 1-5`”|passwd –stdinuser<span class="variable">$i</span> &gt;/dev/null 2&gt;&amp;1</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<ol start="24">
<li>写一个脚本，实现判断192.168.1.0&#x2F;24网络里，当前在线的IP有哪些，能ping通则认为在线？</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> ip <span class="keyword">in</span> `<span class="built_in">seq</span> 1 255`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">ping -c 1 192.168.1.<span class="variable">$ip</span> &gt; /dev/null 2&gt;&amp;1</span><br><span class="line"><span class="keyword">if</span> [ $? -eq 0 ]; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> 192.168.1.<span class="variable">$ip</span> UP</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> 192.168.1.<span class="variable">$ip</span> DOWN</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">&#125;&amp;</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">wait</span></span><br></pre></td></tr></table></figure>

<ol start="25">
<li>写一个脚本，判断一个指定的脚本是否是语法错误；如果有错误，则提醒用户键入Q或者q无视错误并退出其它任何键可以通过vim打开这个指定的脚本？</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost tmp]# <span class="built_in">cat</span> checksh.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="built_in">read</span> -p “please input check script-&gt; ” file</span><br><span class="line"><span class="keyword">if</span> [ -f <span class="variable">$file</span> ]; <span class="keyword">then</span></span><br><span class="line">sh -n <span class="variable">$file</span> &gt; /dev/null 2&gt;&amp;1</span><br><span class="line"><span class="keyword">if</span> [ $? -ne 0 ]; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">read</span> -p “You input <span class="variable">$file</span> syntax error,[Type q to <span class="built_in">exit</span> or Type vim to edit]” answer</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$answer</span> <span class="keyword">in</span></span><br><span class="line">q | Q)</span><br><span class="line"><span class="built_in">exit</span> 0</span><br><span class="line">;;</span><br><span class="line">vim )</span><br><span class="line">vim <span class="variable">$file</span></span><br><span class="line">;;</span><br><span class="line">*）</span><br><span class="line"><span class="built_in">exit</span> 0</span><br><span class="line">;;</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> “<span class="variable">$file</span> not exist”</span><br><span class="line"><span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<ol start="26">
<li>写一个脚本，要求如何？</li>
</ol>
<p>创建一个函数，能接受两个参数：</p>
<p>1）第一个参数为URL，即可下载的文件；第二个参数为目录，即下载后保存的位置；</p>
<p>2）如果用户给的目录不存在，则提示用户是否创建；如果创建就继续执行，否则，函数返回一个51的错误值给调用脚本；</p>
<p>3）如果给的目录存在，则下载文件；下载命令执行结束后测试文件下载成功与否；如果成功，则返回0给调用脚本，否则，返回52给调用脚本。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost tmp]# <span class="built_in">cat</span> downfile.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">url=<span class="variable">$1</span></span><br><span class="line"><span class="built_in">dir</span>=<span class="variable">$2</span></span><br><span class="line"><span class="function"><span class="title">download</span></span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$dir</span> &gt;&gt; /dev/null 2&gt;&amp;1</span><br><span class="line"><span class="keyword">if</span> [ $? -ne 0 ];<span class="keyword">then</span></span><br><span class="line"><span class="built_in">read</span> -p “<span class="variable">$dir</span> No such file or directory,create?(y/n)” answer</span><br><span class="line"><span class="keyword">if</span> [ “<span class="variable">$answer</span>” == “y” ];<span class="keyword">then</span></span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="variable">$dir</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$dir</span></span><br><span class="line">wget <span class="variable">$url</span> 1&gt; /dev/null 2&gt;&amp;1</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">return</span> “51”</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ $? -ne 0 ]; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">return</span> “52”</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line">download <span class="variable">$url</span> <span class="variable">$dir</span></span><br><span class="line"><span class="built_in">echo</span> $?</span><br></pre></td></tr></table></figure>

<ol start="27">
<li>写一个脚本，详细需求如下？<br>1、创建一个函数，可以接受一个磁盘设备路径（如&#x2F;dev&#x2F;sdb）作为参数；在真正开始后面步骤之前提醒用户有危险，并让用户选择是否继续；而后将此磁盘设备上的所有分区清空（提示，使用命令dd if&#x3D;&#x2F;dev&#x2F;zero of&#x3D;&#x2F;dev&#x2F;sdb bs&#x3D;512 count&#x3D;1实现，注意其中的设备路径不要写错了；</li>
</ol>
<p>如果此步骤失败，返回67给主程序；</p>
<p>接着在此磁盘设备上创建两个主分区，一个大小为100M，一个大小为1G；如果此步骤失败，返回68给主程序；</p>
<p>格式化此两分区，文件系统类型为ext3；如果此步骤失败，返回69给主程序；</p>
<p>如果上述过程都正常，返回0给主程序；</p>
<p>2、调用此函数；并通过接收函数执行的返回值来判断其执行情况，并将信息显示出来。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">local</span> Darray=(`<span class="built_in">ls</span> /dev/sd[a-z]`)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$&#123;Darray&#125;</span>;<span class="keyword">do</span></span><br><span class="line">[[ “<span class="variable">$i</span>” == “<span class="variable">$1</span>” ]] &amp;&amp; Sd=<span class="variable">$i</span> &amp;&amp;<span class="built_in">break</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">return66</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#当匹配成功，进入选择，告诉用户，是否继续，输错的话进入无限循环，当用户选择Y,则清空目标分区，且跳出while循环</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> :;<span class="keyword">do</span></span><br><span class="line"><span class="built_in">read</span> -p “Warning!!!This operation will clean <span class="variable">$Sd</span> data.Next=y,Quit=n [y|n]:” Choice</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$Choice</span> <span class="keyword">in</span></span><br><span class="line">y)</span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zero of=<span class="variable">$Sd</span> bs=512 count=1 &amp;&gt; /dev/null &amp;&amp;<span class="built_in">break</span> || <span class="built_in">return</span> 67 ;;</span><br><span class="line">n)</span><br><span class="line"><span class="built_in">exit</span> 88 ;;</span><br><span class="line">*)</span><br><span class="line"><span class="built_in">echo</span> “Invalid choice,please choice again.” ;;</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#使用echo传递给fdisk进行分区，如果此命令失败，则跳转出去，错误值68，需要注意的是，有时候这个返回值很诡异，笔者之前成功与否都是返回的1，后来重启之后，就好了，如果慎重的话，可以对创建的分区，进行判断，不过就需要使用其他工具截取相关字段了，虽有些小麻烦，但无大碍</span></span><br><span class="line"></span><br><span class="line">echo-e “np1+100Mnp2+1024Mw”|fdisk /dev/sdb&amp;&gt; /dev/null || || <span class="built_in">return</span> 68</span><br><span class="line"></span><br><span class="line"><span class="comment">#格式化之前，让内核重新读取磁盘分区表，值得注意的是，有的系统版本，使用partprobe无效，譬如笔者的环境是rhel5.8，而rhel6.0以后，这个命令就很危险了，而使用partx -a /dev/sdb则效果更好…此项需慎重，如果格式化失败，则告知把失败的分区定义成变量，且跳出函数，并带出错误值69</span></span><br><span class="line"></span><br><span class="line">`partprobe`</span><br><span class="line">Part=`fdisk -l /dev/<span class="variable">$Sd</span>|<span class="built_in">tail</span> -2|<span class="built_in">cut</span> -d” ” -f1`</span><br><span class="line"><span class="keyword">for</span> M <span class="keyword">in</span> <span class="variable">$&#123;Part&#125;</span>;<span class="keyword">do</span></span><br><span class="line">mke2fs -j <span class="variable">$M</span> &amp;&gt; /dev/null &amp;&amp; ErrorPart=<span class="variable">$M</span> &amp;&amp;<span class="built_in">return</span> 69</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">return</span> 0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#下面代码，调用函数，接收函数返回值，根据返回值进行判断哪里出错。</span></span><br><span class="line"></span><br><span class="line">Disk_Mod <span class="variable">$1</span></span><br><span class="line">Res=$?</span><br><span class="line">[ <span class="variable">$Res</span>-eq 0 ] &amp;&amp; <span class="built_in">exit</span> 0</span><br><span class="line">[ <span class="variable">$Res</span>-eq 66 ] &amp;&amp; <span class="built_in">echo</span> “Error! Invalid input.”</span><br><span class="line">[ <span class="variable">$Res</span>-eq 67 ] &amp;&amp; <span class="built_in">echo</span> “Error! Command -&gt; <span class="built_in">dd</span> fdisk mke2fs</span><br></pre></td></tr></table></figure>

<ol start="28">
<li>如何让history命令显示具体时间？</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">HISTTIMEFORMAT=”%Y-%m-%d %H:%M:%S”</span><br><span class="line"><span class="built_in">export</span> HISTTIMEFORMAT</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新开机后会还原，可以写/etc/profile</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://dockerworld.cn/?id=392">https://dockerworld.cn/?id=392</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/martin-huang/p/13606761.html">https://www.cnblogs.com/martin-huang/p/13606761.html</a><br><a target="_blank" rel="noopener" href="https://fang.readthedocs.io/zh-cn/latest/%E8%BF%90%E7%BB%B4%E4%BA%BA%E7%94%9F/%E8%BF%90%E7%BB%B4%E7%BB%8F%E5%85%B8%E9%9D%A2%E8%AF%95%E9%A2%98%E5%90%88%E9%9B%86.html">https://fang.readthedocs.io/zh-cn/latest/%E8%BF%90%E7%BB%B4%E4%BA%BA%E7%94%9F/%E8%BF%90%E7%BB%B4%E7%BB%8F%E5%85%B8%E9%9D%A2%E8%AF%95%E9%A2%98%E5%90%88%E9%9B%86.html</a><br><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/2407138">https://cloud.tencent.com/developer/article/2407138</a></p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2025/04/17/pantesting-Intranet/">
                内网渗透
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2025-04-17</span>
            
            
            
                <span class="category">
                    <a href="/categories/渗透/">渗透</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <h2 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h2><p>内网基础环境分析<br>内网基础环境判断<br>IP、网关、DNS、是否能连通外网、网络连接及端口、本机host文件、机器的代理、是否在域内，域名是什么。</p>
<p>分析机器所处位置区域<br>DMZ区、办公区、生产区、核心DB等等</p>
<p>DMZ（Demilitarized Zone，非军事区或隔离区）是网络安全架构中的一种设计，用于增强网络的安全性。它通常指在内部网络和外部网络（如互联网）之间设置的一个中间区域，用于放置公共访问的服务和设备。</p>
<p>分析机器的角色<br>普通WEB服务器、开发服务器、文件服务器、代理服务器、DNS服务器、数据存储服务器等等</p>
<p>分析进出口流量是否能连通<br>协议的判断：常见的TCP、DNS、HTTP、ICMP等协议</p>
<p>端口判断：外网vps做监听，内网机器测试常见端口，常见能出去的端口有 80,8080,443,53,110,123 等。</p>
<ol>
<li><p>TCP协议：</p>
<blockquote>
<p>vps：nc -lvvp 8888<br>target：nc vps-ip 8888</p>
</blockquote>
</li>
<li><p>HTTP协议：</p>
<blockquote>
<p>vps：nc -lvvp 80<br>target：curl vps-ip 80</p>
</blockquote>
</li>
<li><p>ICMP协议：</p>
<blockquote>
<p>vps：tcpdump icmp （tcpdump是一个抓包工具，用于捕获和分析通过网络接口传输的数据包。）<br>target：ping vps-ip<br>ping 命令属于 互联网控制消息协议（ICMP, Internet Control Message Protocol）。</p>
</blockquote>
</li>
<li><p>DNS协议：</p>
<blockquote>
<p>vps：nc -u -lvp 53<br>target：nslookup <a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a> vps-ip<br>dig @vsp-ip <a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a><br>（dig 是一个用于查询 DNS（域名系统）信息的命令行工具，广泛用于网络管理和故障排查，可以获取有关域名的不同类型的 DNS 记录。在Windows系统中不内置，在Linux则有内置）</p>
</blockquote>
</li>
</ol>
<h4 id="本机的-hosts-文件用于映射主机名（域名）到-IP-地址。"><a href="#本机的-hosts-文件用于映射主机名（域名）到-IP-地址。" class="headerlink" title="本机的 hosts 文件用于映射主机名（域名）到 IP 地址。"></a>本机的 hosts 文件用于映射主机名（域名）到 IP 地址。</h4><ol>
<li>基本功能<br>域名解析：hosts 文件可以手动指定某个域名对应的 IP 地址，优先于 DNS 服务器的解析结果。<br>本地测试：在开发和测试环境中，可以将域名指向本地 IP 地址（如 127.0.0.1），方便开发者在不影响外部网络的情况下进行测试。</li>
<li>使用场景<br>屏蔽网站：可以将某些网站的域名指向 0.0.1，从而阻止访问该网站。<br>快速访问：将常用的域名映射到本地 IP 地址，可以加快访问速度，尤其是在 DNS 服务不稳定的情况下。<br>替代 DNS：在没有 DNS 服务的网络中，可以使用 hosts 文件进行简单的域名解析。</li>
<li>文件位置<br>Windows：通常位于 C:\Windows\System32\drivers\etc\hosts<br>Linux 和 macOS：通常位于 &#x2F;etc&#x2F;hosts</li>
<li>文件格式<br>hosts 文件的格式较为简单，每行包含一个 IP 地址和一个或多个主机名，例如：<br>127.0.0.1 localhost 192.168.1.10 mylocaldev</li>
<li>优缺点<br>优点:<br>提高解析速度，减少对 DNS 服务器的依赖。<br>简单易用，适合快速配置。<br>缺点:<br>不易于管理，特别是在需要频繁更改时。<br>在大型网络中，维护 hosts 文件可能变得复杂且不高效。</li>
</ol>
<h3 id="本机信息收集"><a href="#本机信息收集" class="headerlink" title="本机信息收集"></a>本机信息收集</h3><p>操作系统、权限、内网IP地址段、杀软、端口、服务、补丁情况、网络环境情况、共享、会话等</p>
<p>如果是域内主机，那么操作系统、应用软件、补丁、服务、杀软一般都是批量安装的。</p>
<h3 id="内网网段信息收集"><a href="#内网网段信息收集" class="headerlink" title="内网网段信息收集"></a>内网网段信息收集</h3><p>只有找到不同网段才能进行纵向渗透，否则只能横向渗透</p>
<p>纵向渗透关注的是权限的提升，从低权限向高权限移动，旨在获取更深层次的控制。<br>横向渗透则是在同一权限层级内扩展访问，旨在访问更多的目标或资源。</p>
<ol>
<li>内网网段扫描</li>
<li>文件共享、FTP连接记录、浏览器访问记录、mstsc连接记录<br>拓展：mstsc 是 Windows 系统中用于远程桌面连接的工具。按 Win + R 输入mstsc即可启动。</li>
<li>渗透路由器、交换机</li>
</ol>
<h3 id="用户信息（用CMD）"><a href="#用户信息（用CMD）" class="headerlink" title="用户信息（用CMD）"></a>用户信息（用CMD）</h3><ul>
<li>查看本机用户列表：<blockquote>
<p>net user</p>
</blockquote>
</li>
<li>获取本地管理员信息：<blockquote>
<p>net localgroup administrators</p>
</blockquote>
</li>
<li>查看当前在线用户：<blockquote>
<p>quser query user query user || qwinsta</p>
</blockquote>
</li>
<li>查看当前用户在目标系统中的具体权限：<blockquote>
<p>whoami &#x2F;all</p>
</blockquote>
</li>
<li>查看当前权限：<blockquote>
<p>whoami &amp;&amp; whoami &#x2F;priv</p>
</blockquote>
</li>
<li>查看当前机器中所有的组名，了解不同组的职能，如 IT、HR、ADMIN、FILE：<blockquote>
<p>net localgroup</p>
</blockquote>
</li>
</ul>
<h3 id="系统信息"><a href="#系统信息" class="headerlink" title="系统信息"></a>系统信息</h3><ul>
<li>查询网络配置信息，进行IP地址段信息收集：<blockquote>
<p>ipconfig &#x2F;all</p>
</blockquote>
</li>
<li>查询操作系统及软件信息（当然也可以直接运行：systeminfo）：<blockquote>
<p>systeminfo | findstr &#x2F;B &#x2F;C:”OS 名称” &#x2F;C:”OS 版本” #中文系统</p>
</blockquote>
</li>
<li>查看当前系统版本：<blockquote>
<p>wmic OS get Caption,CSDVersion,OSArchitecture,Version</p>
</blockquote>
</li>
</ul>
<p>上面这个命令使用 WMIC 工具来获取 Windows 操作系统的相关信息。具体来说，它的作用是提取以下几个属性：</p>
<blockquote>
<p>wmic：调用 Windows Management Instrumentation Command-line 工具。<br>OS：指定要查询的对象类型为操作系统（Operating System）。<br>get：表示获取指定的属性。<br>Caption：操作系统的名称（如 Windows 10）。<br>CSDVersion：操作系统的服务包版本（如 Service Pack 1），如果没有安装服务包则可能为空。<br>OSArchitecture：操作系统的架构（如 32 位或 64 位）。<br>Version：操作系统的版本号（如 10.0.19041）。</p>
</blockquote>
<ul>
<li>查看系统体系结构：<blockquote>
<p>echo %PROCESSOR_ARCHITECTURE%</p>
</blockquote>
</li>
<li>查询本机服务信息：<blockquote>
<p>wmic service list brief</p>
</blockquote>
</li>
<li>查看安装的软件的版本、路径等：<blockquote>
<p>wmic product get name,version powershell “Get-WmiObject -class Win32_Product | Select-Object -Property name, version”</p>
</blockquote>
</li>
</ul>
<h2 id="Windows-内网渗透"><a href="#Windows-内网渗透" class="headerlink" title="Windows 内网渗透"></a>Windows 内网渗透</h2><h3 id="工作组和域"><a href="#工作组和域" class="headerlink" title="工作组和域"></a>工作组和域</h3><p>工作组和域的区别：<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/5wgCGHrE5MNsKvN9rChBsw">https://mp.weixin.qq.com/s/5wgCGHrE5MNsKvN9rChBsw</a><br>查看本机工作组的方法：右键“此电脑”，找到“域或工作组”，此时便会显示本机工作组。<br>发现在同一个组的计算机方法：开启 “ 网络发现 ”。</p>
<h3 id="工作组简介"><a href="#工作组简介" class="headerlink" title="工作组简介"></a>工作组简介</h3><p>工作组是最常见最简单最普通的资源管理模式，就是将不同的电脑按功能分别列入不同的组中，以方便管理。</p>
<p>默认情况下所有计算机都处在名为 WORKGROUP 的工作组中，工作组资源管理模式适合于网络中计算机不多，对管理要求不严格的情况。它的建立步骤简单，使用起来也很好上手。</p>
<p>大部分中小公司都采取工作组的方式对资源进行权限分配和目录共享相同组中的不同用户通过对方主机的用户名和密码可以査看对方共享的文件夹，默认共享的是 Users 目录。</p>
<p>不同组的不同用户通过对方主机的用户名和密码也可以査看对方共享的文件夹,工作组并不存在真正的集中管理作用，工作组里的所有计算机都是对等的，也就是没有服务器和客户机之分的。</p>
<h2 id="Linux-内网渗透"><a href="#Linux-内网渗透" class="headerlink" title="Linux 内网渗透"></a>Linux 内网渗透</h2><h2 id="mac-内网渗透"><a href="#mac-内网渗透" class="headerlink" title="mac 内网渗透"></a>mac 内网渗透</h2><h3 id=""><a href="#" class="headerlink" title=""></a></h3><p>引用 ：<br><a target="_blank" rel="noopener" href="https://github.com/wjl110/MacGosh-Pro">https://github.com/wjl110/MacGosh-Pro</a><br><a target="_blank" rel="noopener" href="https://github.com/Ridter/Intranet_Penetration_Tips?tab=readme-ov-file#%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86">https://github.com/Ridter/Intranet_Penetration_Tips?tab=readme-ov-file#%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86</a><br><a target="_blank" rel="noopener" href="https://github.com/r0eXpeR/pentest?tab=readme-ov-file#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86">https://github.com/r0eXpeR/pentest?tab=readme-ov-file#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86</a><br><a target="_blank" rel="noopener" href="https://github.com/r0eXpeR/pentest?tab=readme-ov-file">https://github.com/r0eXpeR/pentest?tab=readme-ov-file</a><br><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/system/254884.html">https://www.freebuf.com/articles/system/254884.html</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/backlion/p/16850277.html">https://www.cnblogs.com/backlion/p/16850277.html</a><br><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/system/254826.html">https://www.freebuf.com/articles/system/254826.html</a><br><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/network/177493.html">https://www.freebuf.com/articles/network/177493.html</a><br><a target="_blank" rel="noopener" href="https://www.ddosi.org/nessus2024/#google_vignette">https://www.ddosi.org/nessus2024/#google_vignette</a><br><a target="_blank" rel="noopener" href="https://www.ddosi.org/nessus-plugin-pro-3/">https://www.ddosi.org/nessus-plugin-pro-3/</a><br><a target="_blank" rel="noopener" href="https://github.com/Hack-with-Github/Awesome-Hacking">https://github.com/Hack-with-Github/Awesome-Hacking</a></p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2025/04/17/pantesting-getinfo/">
                信息收集
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2025-04-17</span>
            
            
            
                <span class="category">
                    <a href="/categories/渗透/">渗透</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p>信息收集是指通过各种方式获取所需要的信息，以便我们在后续的渗透过程更好的进行。比如目标站点IP、中间件、脚本语言、端口、邮箱等等。信息收集包含资产收集但不限于资产收集。</p>
<ul>
<li><p>主动信息收集<br>通过直接访问网站在网站上进行操作、对网站进行扫描等，这种是有网络流量经过目标服务器的信息收集方式。</p>
</li>
<li><p>被动信息收集<br>基于公开的渠道，比如搜索引擎等，在不与目标系统直接交互的情况下获取信息，并且尽量避免留下痕迹。</p>
</li>
<li><p><a href="#1">服务器信息</a></p>
<ul>
<li><a href="#1.1">域名信息</a><ul>
<li><a href="#1.1.1">搜索引擎搜索</a></li>
<li><a href="#1.1.2">子域名查询</a></li>
<li><a href="#1.1.3">IP域名反查</a></li>
<li><a href="#1.1.4">CDN</a></li>
<li><a href="#1.1.5">扫描工具</a></li>
<li><a href="#1.1.6">域名相关性总结</a></li>
</ul>
</li>
<li><a href="#1.2">端口信息</a><ul>
<li><a href="#1.2.1">端口扫描</a></li>
</ul>
</li>
</ul>
</li>
<li><p><a href="#2">网站&#x2F;域名信息</a></p>
<ul>
<li><a href="#2.1">网络指纹识别</a></li>
<li><a href="#2.2">网站服务 &#x2F; 容器类型</a></li>
<li><a href="#2.3">敏感文件及目录探测</a></li>
<li><a href="#2.4">网站备份文件</a></li>
<li><a href="#2.5">网站WAF识别</a></li>
<li><a href="#2.6">Windows主机信息收集</a></li>
</ul>
</li>
<li><p><a href="#3">社会工程学-人员信息</a></p>
<ul>
<li><a href="#3.1">企业信息收集</a></li>
<li><a href="#3.2">人员信息收集</a></li>
<li><a href="#3.3">钓鱼</a></li>
<li><a href="#3.4">其他信息</a></li>
</ul>
</li>
</ul>
<h3 id="1">服务器信息</h3>

<ul>
<li><p>IP</p>
<blockquote>
<p>C段</p>
</blockquote>
</li>
<li><p>线下网络</p>
<blockquote>
<p>Wi-Fi</p>
<ul>
<li>SSID</li>
<li>认证信息</li>
</ul>
<p>bluetooth</p>
</blockquote>
</li>
<li><p>VPN</p>
<blockquote>
<p>厂商<br>登录方式</p>
</blockquote>
</li>
<li><p>邮件网关</p>
</li>
<li><p>手机APP</p>
</li>
<li><p>小程序后台</p>
</li>
<li><p>OA</p>
</li>
<li><p>SSO</p>
</li>
<li><p>边界网络设备</p>
</li>
<li><p>上游运营商</p>
</li>
</ul>
<h4 id="1.1">域名信息</h4>

<h5 id="1.1.1">搜索引擎搜索</h5>

<p>用搜索引擎 搜索相关的域名和子域名 <code>site:[DomainName]</code></p>
<ul>
<li>site:<br>限定搜索结果只来自特定网站。<blockquote>
<p>示例：<code>site:</code>wikipedia.org</p>
</blockquote>
</li>
<li>filetype:<br>查找特定类型的文件。<blockquote>
<p>示例：<code>filetype:</code>pdf 教学大纲</p>
</blockquote>
</li>
<li>intitle:<br>查找标题中包含特定词语的页面。<blockquote>
<p>示例：<code>intitle:</code>市场分析</p>
</blockquote>
</li>
<li>inurl:<br>查找URL中包含特定词语的页面。<blockquote>
<p>示例：<code>inurl:</code>blog</p>
</blockquote>
</li>
<li>related:<br>查找与某个特定网站相似的网站。<blockquote>
<p>示例：<code>related:</code>example.com</p>
</blockquote>
</li>
<li>OR（要大写）<br>在搜索中使用逻辑“或”，查找包含任一关键词的结果。<blockquote>
<p>示例：<code>苹果 OR 橙子</code></p>
</blockquote>
</li>
<li>-（短横线）<br>排除某个词语，从搜索结果中剔除特定内容。<blockquote>
<p>示例：<code>水果 -香蕉</code></p>
</blockquote>
</li>
<li>“ “（引号）<br>精确匹配短语，查找包含确切词组的结果。<blockquote>
<p>示例：<code>&quot;机器学习入门&quot;</code></p>
</blockquote>
</li>
<li>*（星号）<br>用作通配符，可以替代一个或多个词。<blockquote>
<p>示例：<code>&quot;我喜欢 * 的电影&quot;</code></p>
</blockquote>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 返回此目标站点被搜索引擎抓取收录的所有内容</span></span><br><span class="line">site:www.hao123.com</span><br><span class="line"></span><br><span class="line"><span class="comment">## 返回此目标站点被搜索引擎抓取收录的包含此关键词的所有页面</span></span><br><span class="line"><span class="comment">## 此处可以将关键词设定为网站后台，管理后台，密码修改，密码找回等</span></span><br><span class="line">site:www.hao123.com keyword</span><br><span class="line"></span><br><span class="line"><span class="comment">## 返回目标站点的地址中包含admin.php的所有页面，可以使用admin.php/manage.php或者其他关键词来寻找关键功能页面 </span></span><br><span class="line">site:www.hao123.com inurl:admin.php</span><br><span class="line"></span><br><span class="line"><span class="comment">## 返回所有包含目标站点链接的页面，其中包括其开发人员的个人博客，开发日志，或者开放这个站点的第三方公司，合作伙伴等</span></span><br><span class="line"><span class="built_in">link</span>:www.hao123.com</span><br><span class="line"></span><br><span class="line"><span class="comment">## 返回所有与目标站点”相似”的页面，可能会包含一些通用程序的信息等</span></span><br><span class="line">related:www.hao123.com</span><br><span class="line"></span><br><span class="line"><span class="comment">## 搜索出错的页面</span></span><br><span class="line">intitle:<span class="string">&quot;500 Internal Server Error&quot;</span> <span class="string">&quot;server at&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 查找代理服务器</span></span><br><span class="line">inurl:<span class="string">&quot;nph-proxy.cgi&quot;</span> <span class="string">&quot;Start browsing&quot;</span></span><br><span class="line"><span class="comment">## 除了以上的关键字，还有allintile / allinurl / allintext / inanchor / intext / filetype / info / numberange / cache等。</span></span><br></pre></td></tr></table></figure>

<h5 id="1.1.2">第三方查询</h5>

<ul>
<li><a target="_blank" rel="noopener" href="https://dnsdumpster.com/">子域名查询信息</a></li>
<li><a href="virustotal.com">全球最大的免费在线查毒网站 virustotal</a></li>
<li>[威胁信息挖掘](<a target="_blank" rel="noopener" href="https://www.threatminer.org)/">https://www.threatminer.org）</a></li>
<li><a target="_blank" rel="noopener" href="https://search.censys.io/">联网设备信息的新型搜索引擎</a></li>
</ul>
<h5 id="1.1.2">子域名查询</h5>

<ul>
<li>SSL证书查询<ul>
<li><a target="_blank" rel="noopener" href="https://crt.sh/">SSL查询网址</a></li>
</ul>
</li>
<li>发现子域名工具<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/Threezh1/JSFinder">JS子域名爬取工具</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/shmilylty/OneForAll">强大的子域搜集工具 - OneForAll</a></li>
<li><a href="">Subdomainsbrute</a></li>
<li><a target="_blank" rel="noopener" href="https://scan.javasec.cn/">在线爆破子域名</a></li>
</ul>
</li>
</ul>
<h5 id="1.1.3">IP域名反查</h5>

<ul>
<li>IP反查域名<ul>
<li><a target="_blank" rel="noopener" href="http://stool.chinaz.com/same">1</a></li>
<li><a target="_blank" rel="noopener" href="https://tools.ipip.net/ipdomain.php">2</a></li>
</ul>
</li>
<li>域名查询IP<ul>
<li><a target="_blank" rel="noopener" href="https://ip.tool.chinaz.com/">3</a></li>
</ul>
</li>
</ul>
<h5 id="1.1.4">CDN</h5>

<p>CDN即内容分发网络。CDN是构建在网络之上的内容分发网络，依靠部署在各地的边缘服务器，通过中心平台的负载均衡、内容分发、调度等功能模块，使用户就近获取所需内容，降低网络拥塞，提高用户访问响应速度和命中率。</p>
<p>通俗来说，就是部署在本地的服务器，里面备用了想要访问的服务器的数据。</p>
<ul>
<li>多地ping判断CDN<ul>
<li><a target="_blank" rel="noopener" href="http://ping.chinaz.com/">1</a></li>
<li><a target="_blank" rel="noopener" href="http://www.webkaka.com/Ping.aspx">2</a></li>
</ul>
</li>
<li>Mx记录邮件服务<ul>
<li>将IP输入到ping检测网址里</li>
</ul>
</li>
<li>查询历史DNS记录<ul>
<li><a target="_blank" rel="noopener" href="https://dnsdb.io/zh-cn">1</a></li>
<li><a target="_blank" rel="noopener" href="https://securitytrails.com/">2</a></li>
<li><a target="_blank" rel="noopener" href="https://x.threatbook.cn/">3</a></li>
</ul>
</li>
<li>常见的几个DNS记录类型<ul>
<li>A记录：将域名指向一个IPV4地址(例如:100.100.100.100)，需要增加A记录；</li>
<li>NS记录：域名解析服务器记录，如果要将子域名指定某个域名服务器来解析，需要设置NS记录；</li>
<li>SOA记录： SOA叫做起始授权机构记录，NS用于标识多台域名解析服务器，SOA记录用于在众多NS记录中标记哪一台是主服务器；</li>
<li>MX记录：建立电子邮箱服务，将指向邮件服务器地址，需要设置MX记录。建立邮箱时，一般会根据邮箱服务商提供的MX记录填写此记录；</li>
<li>TXT记录：可任意填写，可为空。一般做一些验证记录时会使用此项，如做SPF(反垃圾邮件)记录；</li>
</ul>
</li>
</ul>
<h5 id="1.1.5">扫描工具</h5>

<ul>
<li>nmap</li>
<li><a target="_blank" rel="noopener" href="https://github.com/se55i0n/Cwebscanner">Cwebscan</a></li>
</ul>
<h5 id="1.1.6">域名相关性总结</h5>

<ul>
<li>查询域名注册邮箱</li>
<li>通过域名查询备案号</li>
<li>通过备案号查询域名</li>
<li>反查注册邮箱</li>
<li>反查注册人</li>
<li>通过注册人查询到的域名在查询邮箱</li>
<li>通过上一步邮箱去查询域名</li>
<li>查询以上获取出的域名的子域名</li>
</ul>
<h4 id="1.2">端口信息</h4>

<ul>
<li>端口类型<br>周知端口：众所周知的端口号，范围:0-1023，如80端口是WWW服务<br>动态端口：一般不固定分配某种服务，范围:49152-65535<br>注册端口：范围:1024-49151，用于分配给用户进程或程序</li>
<li>各种端口介绍<ul>
<li>FTP (21&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">FTP：文件传输协议，允许用户通过网络上传、下载和管理文件，使用TCP端口20、21。20用于传输数据，21用于传输控制信息。</span><br><span class="line"></span><br><span class="line">FTP 本身并不加密：数据以明文形式传输，容易被窃听。</span><br><span class="line"></span><br><span class="line">(1) ftp基础爆破：owasp 的 Bruter、hydra 以及 msf 中的 ftp 爆破模块。 暴力破解密码 默认用户名密码 anonymous:anonymous</span><br><span class="line"></span><br><span class="line">(2) ftp匿名访问：</span><br><span class="line">用户名: anonymous 密码: 为空或者任意邮箱</span><br><span class="line"></span><br><span class="line">(3) vsftpd后门：vsftpd 2到2.3.4版本存在后门漏洞，通过该漏洞获取root权限</span><br><span class="line"></span><br><span class="line">(4) 嗅探：ftp使用明文传输，使用 Cain 进行渗透。(但是探需要在局域网并需要欺骗或监听网关)</span><br><span class="line"></span><br><span class="line">(5) ftp远程代码溢出。</span><br><span class="line"></span><br><span class="line">(6) ftp跳转攻击。</span><br><span class="line"></span><br><span class="line">FTP跳转攻击:https://blog.csdn.net/mgxcool/article/details/48249473</span><br></pre></td></tr></table></figure>
<ul>
<li>SSH (22&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SSH:(secure shell)是目前较可靠，专为远程登录会话和其他网络服务提供安全性的协议。</span><br><span class="line"></span><br><span class="line">(1)弱口令，可使用工具hydra，msf中的ssh爆破模块。</span><br><span class="line"></span><br><span class="line">(2)SSH后门</span><br><span class="line"></span><br><span class="line">(3)openssh用户枚举 CVE-2018-15473.</span><br></pre></td></tr></table></figure>
<ul>
<li>Telent (23&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Telnet 协议是 TCP/IP 协议族中的一员，是Internet远程登录服务的标准协议和主要方式。</span><br><span class="line"></span><br><span class="line">(1) 暴力破解，使用 hydra 或者 msf 中 teInet 模块对其进行破解。</span><br><span class="line"></span><br><span class="line">(2) 在linux系统中一般采用SSH进行远程访问，传输的敏感数据都是经过加密的。而对于windows下的 telnet 来说是脆弱的，因为默认没有经过任何加密就在网络中进行传输。使用cain等嗅探工具可轻松截获远程登录密码。</span><br></pre></td></tr></table></figure>
<ul>
<li>SMTP (25&#x2F;TCP &amp; 465&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">smtp:邮件协议，在linux中默认开启这个服务，可发送钓鱼邮件</span><br><span class="line"></span><br><span class="line">默认端口:25(smtp)、465(smtps)</span><br><span class="line"></span><br><span class="line">(1)爆破:弱口令，使用hydra</span><br><span class="line"></span><br><span class="line">(2)SMTP 无认证伪造发件人</span><br></pre></td></tr></table></figure>
<ul>
<li>DNS (53&#x2F;UDP &amp; 53&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">域传送漏洞</span><br><span class="line">DNS劫持</span><br><span class="line">DNS缓存投毒</span><br><span class="line">DNS欺骗</span><br><span class="line">SPF / DMARC Check</span><br><span class="line">DDoS</span><br><span class="line">    DNS Query Flood</span><br><span class="line">    DNS 反弹</span><br><span class="line"></span><br><span class="line">DNS 隧道</span><br></pre></td></tr></table></figure>
<ul>
<li>DHCP 67 &amp; 68</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">劫持/欺骗</span><br></pre></td></tr></table></figure>
<ul>
<li>TFTP (69&#x2F;TCP)</li>
<li>HTTP (80&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">为超文本传输协议(HTTP)开放的端口，主要用于万维网传输信息的协议</span><br><span class="line"></span><br><span class="line">(1) 通常80端口使用中间件漏洞进行攻击，如 llS、apache任意文件读写漏洞、nginx等</span><br><span class="line"></span><br><span class="line">(2) 80端口一般通过web应用程序的常见漏洞进行攻击</span><br></pre></td></tr></table></figure>
<ul>
<li>Kerberos (88&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">主要用于监听KDC的票据请求</span><br><span class="line">用于进行黄金票据和白银票据的伪造</span><br></pre></td></tr></table></figure>
<ul>
<li>POP3 (110&#x2F;TCP &amp; 995&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">爆破</span><br></pre></td></tr></table></figure>
<ul>
<li>RPC (135&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wmic 服务利用</span><br></pre></td></tr></table></figure>
<ul>
<li>NetBIOS (137&#x2F;UDP &amp; 138&#x2F;UDP) Samba (139&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">139用于提供windows文件和打印机共享及UNIX中的Samba服务</span><br><span class="line"></span><br><span class="line">445用于提供windows文件和打印机共享</span><br><span class="line"></span><br><span class="line">(1)对于开放139/445端口，尝试利用MS17010溢出漏洞进行攻击;</span><br><span class="line"></span><br><span class="line">(2)对于只开放445端口，尝试利用MS06040、MS08067溢出漏洞攻击;</span><br><span class="line"></span><br><span class="line">(3)利用IPC$连接进行渗透</span><br><span class="line">未授权访问</span><br><span class="line">弱口令</span><br></pre></td></tr></table></figure>
<ul>
<li>IMAP (143&#x2F;TCP &amp; 993&#x2F;TCP)</li>
<li>SNMP (161&#x2F;TCP &amp; 161&#x2F;UDP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Public 弱口令</span><br></pre></td></tr></table></figure>
<ul>
<li>LDAP (389&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">用于域上的权限验证服务</span><br><span class="line">匿名访问</span><br><span class="line">注入</span><br></pre></td></tr></table></figure>
<ul>
<li>HTTPS (443&#x2F;TCP)</li>
<li>SMB (445&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Windows 协议簇，主要功能为文件共享服务</span><br><span class="line">net use \\192.168.1.1 /user:xxx\username password</span><br></pre></td></tr></table></figure>
<ul>
<li>Linux Rexec (512&#x2F;TCP &amp; 513&#x2F;TCP &amp; 514&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">弱口令</span><br></pre></td></tr></table></figure>
<ul>
<li>Rsync (873&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">未授权访问</span><br></pre></td></tr></table></figure>
<ul>
<li>RPC (1025&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NFS匿名访问</span><br></pre></td></tr></table></figure>
<ul>
<li>Java RMI (1090&#x2F;TCP &amp; 1099&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">反序列化远程命令执行漏洞</span><br></pre></td></tr></table></figure>
<ul>
<li>MSSQL (1433&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">弱密码</span><br><span class="line">差异备份 GetShell</span><br><span class="line">SA 提权</span><br></pre></td></tr></table></figure>
<ul>
<li>Oracle (1521&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">弱密码</span><br></pre></td></tr></table></figure>
<ul>
<li>NFS (2049&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">权限设置不当</span><br><span class="line">showmount &lt;host&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>ZooKeeper (2171&#x2F;TCP &amp; 2375&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">无身份认证</span><br></pre></td></tr></table></figure>
<ul>
<li>Docker Remote API (2375&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">未限制IP / 未启用TLS身份认证</span><br><span class="line">http://docker.addr:2375/version</span><br></pre></td></tr></table></figure>
<ul>
<li>MySQL (3306&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">3306是MYSQL数据库默认的监听端口</span><br><span class="line"></span><br><span class="line">(1) mysql弱口令破解</span><br><span class="line"></span><br><span class="line">(2) 弱口令登录mysql，上传构造的恶意UDF自定义函数代码，通过调用注册的恶意函数执行系统命令</span><br><span class="line"></span><br><span class="line">(3) SQL注入获取数据库敏感信息，load_fie()函数读取系统文件，导出恶意代码到指定路径</span><br><span class="line">弱密码</span><br><span class="line">日志写WebShell</span><br><span class="line">UDF提权</span><br><span class="line">MOF提权</span><br></pre></td></tr></table></figure>
<ul>
<li>RDP &#x2F; Terminal Services (3389&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">3389是windows远程桌面服务默认监听的端口</span><br><span class="line"></span><br><span class="line">(1) RDP暴力破解攻击</span><br><span class="line"></span><br><span class="line">(2) MS12_020死亡蓝屏攻击</span><br><span class="line"></span><br><span class="line">(3) RDP远程桌面漏洞(CVE-2019-0708)</span><br><span class="line"></span><br><span class="line">(4) MSF开启RDP、注册表开启RDP</span><br><span class="line">弱密码</span><br></pre></td></tr></table></figure>
<ul>
<li>Postgres (5432&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">弱密码</span><br><span class="line">执行系统命令</span><br></pre></td></tr></table></figure>
<ul>
<li>VNC (5900&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">弱密码</span><br></pre></td></tr></table></figure>
<ul>
<li>CouchDB (5984&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">未授权访问</span><br></pre></td></tr></table></figure>
<ul>
<li>WinRM (5985&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Windows对WS-Management的实现</span><br><span class="line">在Vista上需要手动启动，在Windows Server 2008中服务是默认开启的</span><br></pre></td></tr></table></figure>
<ul>
<li>Redis (6379&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">开源的可基于内存的可持久化的日志型数据库，</span><br><span class="line"></span><br><span class="line">(1)爆破弱口令</span><br><span class="line"></span><br><span class="line">(2)redis未授权访问结合ssh key提权</span><br><span class="line"></span><br><span class="line">(3)主从复制 RCE</span><br><span class="line">无密码或弱密码</span><br><span class="line">绝对路径写 WebShell</span><br><span class="line">计划任务反弹 Shell</span><br><span class="line">写 SSH 公钥</span><br><span class="line">Windows 写启动项</span><br></pre></td></tr></table></figure>
<ul>
<li>Kubernetes API Server (6443&#x2F;TCP &amp;&amp; 10250&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://Kubernetes:10250/pods</span><br></pre></td></tr></table></figure>
<ul>
<li>Weblogic (7001&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(1)弱口令、爆破，弱密码一般为weblogic/Oracle@123 or weblogic</span><br><span class="line"></span><br><span class="line">(2)管理后台部署 war包后门</span><br><span class="line"></span><br><span class="line">(3)weblogic SSRF</span><br><span class="line"></span><br><span class="line">(4)反序列化漏洞</span><br></pre></td></tr></table></figure>
<ul>
<li>JDWP (8000&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">远程命令执行</span><br></pre></td></tr></table></figure>
<ul>
<li>ActiveMQ (8061&#x2F;TCP)</li>
<li>Jenkin (8080&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">未授权访问</span><br></pre></td></tr></table></figure>
<ul>
<li>Tomcat-8080</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(1) Tomcat远程代码执行漏洞(CVE-2019-0232)</span><br><span class="line"></span><br><span class="line">(2) Tomcat任意文件上传(CVE-2017-12615)</span><br><span class="line"></span><br><span class="line">(3) tomcat 管理页面弱口令getshell</span><br></pre></td></tr></table></figure>
<ul>
<li>Elasticsearch (9200&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">代码执行</span><br><span class="line">http://es.addr:9200/_plugin/head/</span><br><span class="line">http://es.addr:9200/_nodes</span><br></pre></td></tr></table></figure>
<ul>
<li>Memcached (11211&#x2F;TCP &amp; 11211&#x2F;UDP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">未授权访问</span><br></pre></td></tr></table></figure>
<ul>
<li>RabbitMQ (15672&#x2F;TCP &amp; 15692&#x2F;TCP &amp; 25672&#x2F;TCP)</li>
<li>MongoDB (27017&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">无密码或弱密码</span><br></pre></td></tr></table></figure>
<ul>
<li>Hadoop (50070&#x2F;TCP &amp; 50075&#x2F;TCP)</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">未授权访问</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="1.2.1">端口扫描</h5>

<a href="/2025/04/17/nmap/" title="NMAP">NMAP</a>


<h3 id="2">网站信息</h3>
<h4 id="2.1">网络指纹识别</h4>

<p><a target="_blank" rel="noopener" href="https://github.com/aztecrabbit/bugscanner">备案</a></p>
<ul>
<li>判断网站操作系统<br>  Linux大小写敏感<br>  Windows大小写不敏感</li>
<li>扫描敏感文件<br>  robots.txt<br>  crossdomain.xml<br>  sitemap.xml<br>  xx.tar.gz<br>  xx.bak 等</li>
<li>确定网站采用的语言<br>  如PHP &#x2F; Java &#x2F; Python等<br>  找后缀，比如php&#x2F;asp&#x2F;jsp</li>
<li>前端框架<br>  如jQuery &#x2F; BootStrap &#x2F; Vue &#x2F; React &#x2F; Angular等<br>  查看源代码</li>
<li>中间服务器<br>  如 Apache &#x2F; Nginx &#x2F; IIS 等<br>  查看header中的信息<br>  根据报错信息判断<br>  根据默认页面判断</li>
<li>Web容器服务器<br>  如Tomcat &#x2F; Jboss &#x2F; Weblogic等</li>
<li>后端框架<br>  根据Cookie判断<br>  根据CSS &#x2F; 图片等资源的hash值判断<br>  根据URL路由判断</li>
<li>如wp-admin<br>  根据网页中的关键字判断<br>  根据响应头中的X-Powered-By</li>
<li>CDN信息<br>  常见的有Cloudflare、yunjiasu</li>
<li>探测有没有WAF，如果有，什么类型的<br>  有WAF，找绕过方式<br>  没有，进入下一步</li>
<li>扫描敏感目录，看是否存在信息泄漏<br>  扫描之前先自己尝试几个的url，人为看看反应</li>
<li>使用爬虫爬取网站信息</li>
<li>拿到一定信息后，通过拿到的目录名称，文件名称及文件扩展名了解网站开发人员的命名思路，确定其命名规则，推测出更多的目录及文件名</li>
<li>常见入口目标</li>
<li>关注度低的系统</li>
<li>业务线较长的系统</li>
</ul>
<h4 id="2.2">网站服务 / 容器类型</h4>

<p>在网站页面按下F12，可查看响应头Server字段，选择“ Network 网络 ”页面并按F5进行刷新，在出现的请求里选中和域名一样的，点击会在右侧出现“ headers 标头 ”，下拉找到 “ Response 响应标头 ”，里面有一个“ Server服务 ”，此时里面的值即为网站的中间件。</p>
<p>可显示中间件、服务器、UI框架等的工具：</p>
<p><a target="_blank" rel="noopener" href="https://www.whatweb.net/">在线网址 Whatweb</a><br><a target="_blank" rel="noopener" href="https://www.wappalyzer.com/">浏览器插件 Wappalyzer</a></p>
<h4 id="2.3">CMS识别</h4>

<p><a target="_blank" rel="noopener" href="https://github.com/kukuqi666/dedecmscan">CMS：称为内容管理系统，用于网站内容文章管理：</a></p>
<p><a href="Onlinetools%EF%BC%9Ahttps://github.com/iceyhexman/onlinetools">常见CMS：dedecms(织梦)、Discuz、phpcms等。</a></p>
<h4 id="2.3">敏感文件及目录探测</h4>

<p>github、git、svn（前三个为代码仓库）、.DS Store（苹果操作系统）、.hg、.bzr、CVS、WEB-INF、备份文件都是。</p>
<ul>
<li>github 开发人员将代码上传到网站，在上传的时候，没有删除重要的一些信息。如邮箱信息，SVN信息，内部账号和密码，数据库连接信息，服务器配置信息等。尤其是邮箱信息和内部账号和密码。这类信息可以通过在github上搜索公司的一些特定信息查看是否有程序员将这些信息上传到了github上。<ul>
<li>@example.com password&#x2F;pass&#x2F;pwd&#x2F;secret&#x2F;credentials&#x2F;token</li>
<li>@example.com username&#x2F;user&#x2F;key&#x2F;login&#x2F;ftp&#x2F;</li>
<li>@example.com config&#x2F;ftp&#x2F;smtp&#x2F;pop</li>
<li>@example.com security_credentials&#x2F;connetionstring</li>
<li>@example.com JDBC&#x2F;ssh2_auth_password&#x2F;send_keys</li>
</ul>
</li>
<li><code>.git</code>泄露<ul>
<li>.git” intitle:”index of “：<a target="_blank" rel="noopener" href="https://github.com/lijiejie/GitHack">https://github.com/lijiejie/GitHack</a><br>  GitHack是一个 .git 泄露利用脚本，通过泄露的 .git 文件夹下的文件，重建还原工程源代码。渗透测试人员、攻击者，可以进一步审计代码，挖掘文件上传，SQL注入等web安全漏洞。<br>  git泄露成因及危害：当前大量开发人员使用 git 进行版本控制，对网站进行自动部署。如果配置不当，可能会将.git文件部署到线上环境，这就引起了 git 泄露漏洞)<br>  安全维护方面，git 和 svn 信息泄露，是非常常见也是非常致命的漏洞。会导致整个网站的源码泄露。<br>  防护方法：在部署的时候，对 .git 文件夹进行删除;也可以在 nginx 配置中，对 .git 目录的访问进行屏蔽。</li>
</ul>
</li>
<li><code>.svn</code>泄露<ul>
<li>“.svn” intitle:”index of “：<a target="_blank" rel="noopener" href="https://github.com/admintony/svnExploit">https://github.com/admintony/svnExploit</a><br>  跟git一样，都是用来版本迭代的一个功能。具体一点就是使用 svn checkout 功能来更新代码。如果没有将 .svn 版本控制的目录进行删除，恶意用户就可以使用这个目录下的文件来恢复源码。从而可以获取如数据库密码，源码漏洞等信息。<br>  防护方法：在部署的时候，将该文件进行删除</li>
</ul>
</li>
<li><code>WEB-INF/web.xml</code>泄露<ul>
<li>WEB-INF是Java的WEB应用的安全目录。如果想在页面中直接访问其中的文件，必须通过 web.xml 文件对要访问的文件进行相应映射才能访问</li>
</ul>
</li>
</ul>
<h4 id="2.4">网站备份文件</h4>

<p><a target="_blank" rel="noopener" href="https://github.com/7kbstorm/7kbscan-WebPathBrute">Web路径暴力探测工具</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/maurosoria/dirsearch">目录探测（探测是否有git泄露)</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/H4ckForJob/dirmap">御剑后台扫描工具 dirmap</a></p>
<p>针对漏洞的信息泄露<br><a target="_blank" rel="noopener" href="https://github.com/LandGrey/SpringBootVulExploit">https://github.com/LandGrey/SpringBootVulExploit</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/rabbitmask/SB-Actuator">https://github.com/rabbitmask/SB-Actuator</a></p>
<h4 id="2.5">网站WAF识别</h4>

<p>WAF分类<br>WAF 可以根据其部署方式和实现形式分为软 WAF 和硬 WAF。</p>
<ul>
<li>软 WAF：通常是软件解决方案，可以在现有的服务器或虚拟机上部署。</li>
<li>硬 WAF：通常是基于硬件的设备，专为处理 Web 应用程序流量而设计。</li>
</ul>
<h6 id="WAF功能"><a href="#WAF功能" class="headerlink" title="WAF功能"></a>WAF功能</h6><ol>
<li>防止常见的各类网络攻击，如：SQL注入、XSS跨站、CSRF、网页后门等<br>网页后门执行的是一些系统调用命令，waf可以把请求包的系统调用阻止掉，导致一句话木马失效，需要给木马上免伤。</li>
<li>防止各类自动化攻击，如：暴力破解（配置 iptables 也可以阻止）、撞库、批量注册、自动发贴等;</li>
<li>阻止其它常见威胁，如：爬虫、0 DAY攻击、代码分析、嗅探、数据篡改、越权访问、敏感信息泄漏、应用层DDOS、远程恶意包含、盗链、越权、扫描等。</li>
</ol>
<p>Waf识别<br><a target="_blank" rel="noopener" href="https://github.com/EnableSecurity/wafw00f">wafw00f</a></p>
<ul>
<li>判断网址是否有waf的命令：<blockquote>
<p>wafw00f + 网址</p>
</blockquote>
</li>
<li>查看可识别waf的命令：<blockquote>
<p>wafw00f -l</p>
</blockquote>
</li>
<li>用nmap扫描有无waf：<blockquote>
<p>nmap -p80,443 –script http-waf-detect ip<br>nmap -p80,443 –script http-waf-fingerprint ip</p>
</blockquote>
</li>
</ul>
<h4 id="2.6">Windows主机信息收集</h4>

<a href="/2025/04/17/pantesting-Intranet/" title="内网渗透">内网渗透</a>


<h3 id="3">社会工程学-人员信息</h3>
<h4 id="3.1">企业信息收集</h4>

<p>一些网站如天眼查等，可以提供企业关系挖掘、工商信息、商标专利、企业年报等信息查询，可以提供企业的较为细致的信息。</p>
<p>公司主站中会有业务方向、合作单位等信息。</p>
<h4 id="3.2">人员信息收集</h4>

<p>针对人员的信息收集考虑对目标重要人员、组织架构、社会关系的收集和分析。其中重要人员主要指高管、系统管理员、开发、运维、财务、人事、业务人员的个人电脑。</p>
<p>人员信息收集较容易的入口点是网站，网站中可能包含网站的开发、管理维护等人员的信息。从网站联系功能中和代码的注释信息中都可能得到的所有开发及维护人员的姓名和邮件地址及其他联系方式。</p>
<p>在获取这些信息后，可以在Github&#x2F;Linkedin等社交、招聘网站中进一步查找这些人在互联网上发布的与目标站点有关的一切信息，分析并发现有用的信息。</p>
<p>此外，可以对获取到的邮箱进行密码爆破的操作，获取对应的密码。</p>
<h4 id="3.3">钓鱼</h4>

<p>基于之前收集到的信息，可以使用Office&#x2F;CHM&#x2F;RAR&#x2F;EXE&#x2F;快捷方式等文件格式制作钓鱼邮件发送至目标，进一步收集信息。</p>
<p>其中Office可以使用Office漏洞、宏、OLE对象、PPSX等方式构造利用文件。</p>
<p>Exe可以使用特殊的Unicode控制字符如RLO (Right-to-Left Override) 等来构建容易混淆的文件名。</p>
<p>RAR主要是利用自解压等方式来构建恶意文件，同样加密的压缩包也在一定程度上可以逃逸邮件网关的检测。</p>
<p>如果前期信息收集获取到了运维等人员的邮箱，可以使用运维人员的邮箱发送，如果未收集到相关的信息，可以使用伪造发送源的方式发送邮件。</p>
<p>需要注意的是，钓鱼测试也需要注意合规问题，不能冒充监管单位、不能发送违法违规信息。具体可以参考《中华人民共和国电信条例》、《中华人民共和国互联网电子邮件服务管理办法》等法律法规。</p>
<h4 id="3.4">其他信息</h4>

<p>公司的公众号、企业号、网站，员工的网盘、百度文库等可能会存在一些敏感信息，如VPN&#x2F;堡垒机账号、TeamViewer账号、网络设备默认口令、服务器默认口令等。</p>
<p>引用 ： <a target="_blank" rel="noopener" href="https://linuxtools-rst.readthedocs.io/zh-cn/latest/base/07_network.html">https://linuxtools-rst.readthedocs.io/zh-cn/latest/base/07_network.html</a><br><a target="_blank" rel="noopener" href="https://websec.readthedocs.io/zh/latest/info/site.html">https://websec.readthedocs.io/zh/latest/info/site.html</a></p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2025/04/17/pantesting-interview/">
                渗透 面试题
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2025-04-17</span>
            
            
            
                <span class="category">
                    <a href="/categories/面试/">面试</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <ul>
<li>问：<br>录了多少洞. 自研了多少工具. 擅长什么类型语言，跟挖洞逻辑。</li>
</ul>
<p>问：</p>
<ol>
<li>怎么找入口</li>
<li>怎么拖数据</li>
<li>怎么清日志</li>
<li>怎么长期隐藏</li>
</ol>
<p>问：<br>老三套，问出身. 问证书. 问经验。然后开放题或者从某个经验着手往下挖，最后让自述一下印象最深刻的一次。基本就差不多了。</p>
<p>问：<br>外部的，就是各种白帽子活动等<br>内部的，就是扫描工具管理和漏洞修复流程等</p>
<p>问：<br>外部的，就是各种白帽子活动等<br>内部的，就是扫描工具管理和漏洞修复流程等</p>
<p>问：<br>水平较低：常用工具和常用工具的命令或者工具魔改<br>水平适中：渗透流程简述，最擅长的阶段展开讲述案例和技术特点<br>水平较高：绕过. 免杀. 逃逸. 技术细节<br>水平顶尖：AI 在安全的应用并且算法细节原理</p>
<p>问：</p>
<ol>
<li>介绍比较得意的渗透项目</li>
<li>从Top10里找几个问原理和修复方法</li>
<li>常用的工具，还有工具的bug</li>
<li>遇到复杂漏洞的时候怎么做，举个例子</li>
<li>如何跟踪最新的漏洞和技术</li>
</ol>
<p>问：<br>常规TOP10肯定问一圈了，然后问了一两个案例吧，如果案例都说的挺好，就会问个自己感兴趣的，我喜欢提问Random函数真的随机吗，真假随机数的问题。</p>
<p>问：<br>讲讲你的渗透测试思路，你认为当前网络安全领域的最大威胁是什么？你如何保持对最新安全漏洞和攻击技术的了解？请分享你过去的一个渗透测试项目经验，包括遇到的挑战和解决方案。如何处理客户在渗透测试后对报告的反馈？</p>
<p>A9：</p>
<ol>
<li>提供一个网站，请给出渗透的思路</li>
<li>假设发现了这些漏洞，请问原理是怎么样子的，如何进一步扩大成果</li>
<li>针对这些漏洞，请问对应的修复方案是怎么样子的</li>
<li>列出常用的渗透测试工具，比如？</li>
<li>根据之前的渗透观察，请给出这个网站大概的架构是怎么样子的，网络怎么走，使用了哪些第三方的依赖？</li>
</ol>
<p>A10：</p>
<ol>
<li>搭建靶机环境直接实践</li>
<li>常见的免杀思路及免杀方法</li>
<li>内网渗透常用的工具使用方法，以及常见的提权漏洞编号及原理</li>
<li>常见的高交互蜜罐如何识别</li>
<li>内网渗透，横向移动的若干方法，AD域的黄金作用和白银票据作用，如何获取并利用</li>
</ol>
<p>A11：</p>
<ol>
<li>直接上实操环境考察</li>
<li>问一下对方全流程是什么，主要考察一些意识，比如是否获得授权等等。现在有些培训班会交一些面试的话术的，如果不是专业人员来面试，很可能糊弄过去了。</li>
</ol>
<p>A12：<br>问测试思路. 问漏洞原理（刨根问底的那种），看证书这类客观的证明，再拿一个自己单位渗透测试过程中遇到过的问题，问他遇到了会怎么处理，结合他岗位以后干什么级别的渗透了，问漏洞成因. 攻击原理，这样就能排除培训班. 混子了。问原理直接问到红温，知识储备+抗压表现都能考察到。</p>
<p>A13：<br>说实话，就是不要理论要实战，不要面什么 SQL注入有几种分类. 延迟注入BULL注入有什么区别之类的。直接问有没有在其它SRC提过SQL注入，现在常用的工具，你会去什么地方找POC。渗透流程套路式回答大家都会，最好还是拿出几行漏洞代码实战解读下。</p>
<p>A14：<br>其实我觉得场景面试更加能够判断面试者的能力，开放性场景面试招的几个兄弟都不错。有没有实战能力，通过场景就可以看出来。当然具体还是看岗位的实际要求。比如安服跟自研所需的能力就不一样。开放性场景面试可以考察面试者的功力和知识深度。很多速成的兄弟对原理和知识点和横向移动这些还是比较弱的。</p>
<p>A15：<br>就甲方面试而言，主要提升企业安全风险管理</p>
<ol>
<li>如何确保渗透测试时不会对业务和系统影响</li>
<li>如何做好漏洞生命周期管理</li>
</ol>
<p>A16：<br>甲方里做渗透，一方面是挖洞能力，一方面还有推动漏洞修复的沟通协调能力。</p>
<p>A17：<br>如果面试的是甲方岗位：<br>问题1：说一下你印象最深刻的一次渗透经历；<br>问题2：你觉得甲方岗位具备的渗透能力；<br>问题3：针对无WEB界面的系统如何进行渗透；<br>问题4：说一下XXX组件漏洞的分析过程。</p>
<p>A18：</p>
<p>从甲方的角度，渗透的一个重要点就是需要和开发打交道，明确漏洞原理以及如何修复的。</p>
<p>那么一是漏洞的原理（从代码层面来讲）；二是给一个符合本公司的业务场景，让对方分析下可能出现哪些逻辑漏洞，如何修复因业务处理逻辑问题产生的漏洞（这块可以考察对方的思维逻辑）；三是漏洞修复的思路（这点可以考察对代码的功能和逻辑的实现的熟悉情况）。</p>
<p>渗透测试的思路还是需要问一下的，这个是门槛了。思路逻辑都说不清楚的，直接就pass了。</p>
<p>渗透测试不是攻防，其实不需要太多社会工程的，要是熟练用社会工程学的，那么就是加分项。</p>
<p>A19：</p>
<p>鄙人拙见：如果是甲方面试安全岗位人员，一般会从理论水平和实践经验. 实操能力. 心里素质等多方面考察面试者。理论水平可以提前参考专业证书. 专业试题. 前沿技术热点等考察或测试；实践经验主要看既往的项目执行情况&#x2F;安全管理运营情况，以及从中总结出的经验和教训；实操能力可以通过威胁建模. 渗透测试. 代码审计. 应急响应等方面的技术细节来提问；心理素质则可以通过心理分析类题目. 面试中设置“向领导汇报安全问题“. “沟通协调强势部门整改”等场景化问题来考察面试者是否能从容应对。</p>
<p>Q：面试安全管理岗位，作为面试官，你觉得提问什么问题可以比较好地考察面试者的水平？<br>A20：</p>
<ol>
<li>如果公司有一个project要上线，你会怎么开展风险评估并给出建议？</li>
<li>了解安全成熟度吗？</li>
<li>刚进入一家公司工作，是如何做安全规划的？</li>
</ol>
<p>之前面试被问过的，也算经典问题。</p>
<p>A21：</p>
<ol>
<li>如何展示业绩达成</li>
<li>如何申请资源和投入产出收益</li>
<li>如何向上管理</li>
<li>如何与业务老大激烈沟通</li>
</ol>
<p>A22：</p>
<p>我遇到过的问题，如果会议上你老板说的话从你的视角来看有很大的安全认知上的错误，你会怎么做？</p>
<p>A23：</p>
<p>直接问怎样保住安全团队？安全建设思路. 理念等等，看他整体框架怎么样。</p>
<p>A24：</p>
<p>描述你如何制定和实施一个全面的信息安全管理体系（ISMS），包括风险评估. 政策制定. 技术措施. 人员培训和持续改进等方面。在这个过程中，你会面临哪些挑战，以及你将如何应对这些挑战？</p>
<p>A25：</p>
<p>常规的先让他介绍下熟悉哪些标准&#x2F;法律，就职的公司有哪些认证，在公司取得270001&#x2F;等时他从事哪些角色，做了哪些，另外就是安全部门如何驱动IT及业务落地安全。</p>
<p>A26：</p>
<p>关注一下被面试者对前面业务的理解以及这个业务最大的风险点。以前遇到的最困难的场景以及解决的方法。可以看出他的风险偏好以及沟通协调能力。</p>
<p>A27：</p>
<p>这个我会完全围绕上一家来问，问他上家公司的规模，他所在的团队，他进去的时候是多少人，离开的时候是多少人，为什么，中间发生了什么变化，他遇到了什么问题，解决了什么问题，听听他的思考，管理岗我是觉得没有套路，主要看脾气与队伍是否合适。</p>
<p>A28：</p>
<p>假设你来给公司从0开始做安全，你会怎么做， 讲述一下SDL建设流程，讲述一下SDL和DevSecOps的区别，等保和ISO27001的区别，说一下你知道的安全模型，有哪些优点和缺点，还有就是问，国内针对网络安全相关的法律有哪些？如果业务涉及国外就问国外体系，比如你对硅谷的安全公司和咨询公司有什么了解？</p>
<p>A29：</p>
<ol>
<li>看看他对合规的理解，尤其是ZZ觉悟和立场</li>
<li>看看他的理解重点，是在网络层. 数据层. 应用层. 开发层. 架构层. 业务层还是合规层</li>
<li>看看他的重点方向是偏哪个方面：技术？管理？控制？合规？隐私保护？个人信息保护？跨境保护？</li>
<li>看看他擅长的技术领域：开发？控制？执行？规划？设计?审计？</li>
<li>合规方面，看他的认知：只知道等保或27001加1分，等保+27001都了解 加2分，叠加个保加3分，叠加跨境加4分，叠加其他国家法律法规认知的，每了解一个加1</li>
<li>他对安全运营的的理解，重点考察他的认知层级（网络层. 数据层. 应用层. 开发层. 架构层）</li>
</ol>
<p>A30：</p>
<p>可以从宏观和微观两个角度考虑：</p>
<ol>
<li>宏观看体系思维：作为甲方安全管理岗位，请面试者站在企业整体安全角度考虑，结合外部监管要求和公司业务发展情况，描述一下如何建立建立本企业的网络安全体系，包含实施简要的实施路径等。</li>
<li>微观看技术细节：结合当前企业安全痛点，请面试者给出解决方案，比如企业最近钓鱼邮件比较多，如何做好相关防范工作；进而对其中一些技术细节，比如SPF. DKIM. DMARC. RDNS等概念和如何实施进行提问等。</li>
</ol>
<p>A31：<br>我面试人也不看技术，我看这个人：</p>
<ol>
<li>有没有学习欲望，有没有学习能力和动力</li>
<li>懒不懒</li>
<li>蠢不蠢</li>
<li>闷不闷（口才沟通）</li>
<li>能否控制情绪</li>
<li>整体认知</li>
</ol>
<p>如果有2. 3. 4，直接PASS。</p>
<p>A32：<br>我一般会问最近安全行业发生了什么事，这件事发生在你这里，如何应对，行业其他公司怎么做的。然后一部分人不知道，一部分人只知道表面，能知道其他公司咋做的，已经是佼佼者了。打一下盲区，基本技术是下面部门经理的事，我主要看认知，问加班强度的，都直接否了。闷葫芦也是致命弱点。</p>
<p>A33：<br>对着他写的简历问，讲的都是头头是道的，问一下细节不会的基本就可以刷了。如果细节都讲出来，能说明他做过就行了，面试不大可能招完全match需求的人，成功做过1~2件事的人上手新事情成功的概率也是相对高一些的。</p>
<p>Q：作为面试者，你遇到过哪些比较“奇葩的”面试题目？<br>A34：<br>如果你是黑客，怎么攻击我们公司。</p>
<p>A35：<br>当你入职以后，怎么融入团队？我当时差点笑出来。</p>
<p>A36：<br>某企业，群面要求15分钟，开放性题目10个人达成统一意见，不允许投票。</p>
<p>A37：<br>我们这边比较闲，可以接受嘛？</p>
<p>A38：<br>网线里面有几根双绞线，怎么排列的</p>
<p>A39：<br>能不能接受轮班或7*24接电话</p>
<p>A40：<br>其实心理测试还是很有必要的，防止有些人情绪比较极端，不好配合。测的就是你面对奇葩题目的时候是否冷静，我们还真有因为心理测验分数太低不予通过的。</p>
<p>A41：<br>你写这些项目经历对我没用啊，你水平不行很垃圾，这样我这里还有一个外地驻场的名额，请问你愿意去外地驻场么？</p>
<p>A42：<br>我有遇到过直接问我，你为什么觉得自己值这么多钱？</p>
<p>A43：<br>当时我说可以用AI对抗WAF防护。面试官逐个厂商问哪家被绕过，面试还有录屏录音。不说详细感觉在吹牛逼，说详细又有录音录屏。你们说咋办？</p>
<p>A44：<br>你的本地电脑，访问百度，中间涉及到的任何IT技术，全部阐述一次。这种一般是问经典的dns解析过程，但所有细节就太扯了。</p>
<p>A45：<br>面过某安全厂商，问我如果有个组件存在某个漏洞，但是没有POC，怎么确定POC是什么?<br>答: 可以对比更新代码或者知道大概细节的话用模糊测试。</p>
<p>面试官: 你这个不对</p>
<p>答: 那你们是怎么确定的？</p>
<p>面试官: 我们给服务器发送一个数据包，通过判断页面返回码判断有没有漏洞。</p>
<p>A46：<br>还做公务员考试的题目呢，类似这样的↓</p>
<p>A47：<br>十年前我去IBM面试的时候，遇到这种题目，还TM五张卷子，全英文！</p>
<p>A48：<br>面试没怎么问技术，就问所有的安全类工作你能不能干，能干就进入下个环节谈工资，领导直接说他不懂技术，老板家的亲戚，来搞钱的，我其实觉得这种领导是很好搭伙的，但是在谈工资的时候让我大吃一鲸，要求全能，但是工资给8K……我说HR跟我说的不是这个数，领导说他说了算，他还暗示了可以搞项目赚钱，但是我不太信，他很直白，说是老板的小舅子，创建这个部门就是为了赚钱的，他说相信我能帮他赚钱，还可以让我喝汤，但是我不敢信。</p>
<p>Q：作为面试者，在面试官提问“你有什么想问的”的时候，应该怎么问？<br>A49：<br>你希望我入职后，为公司做什么？</p>
<p>A50：<br>直接问公司的人员流动性高吗，中年员工占比多少？</p>
<p>A51：<br>有什么内部培训？考证可以报销吗？</p>
<p>A52：<br>把面试官提出来的某些问题反问一下。</p>
<p>A53：<br>刺探一下这个企业经营状况如何，避免试用期就裁员。</p>
<p>A54：<br>出重大安全事件, 给咱们公司主动顶包有补偿吗?</p>
<p>A55：<br>贵公司安全预算每年大概是多少，和业务的占比是什么样的，安全团队的人员构成是什么样的？</p>
<p>还有网络安全公司&#x2F;集团组织架构中的位置是什么样的，网络安全团队负责任的直属上司是谁？</p>
<p>A56：<br>安全人员有几个，如何分工，目前安全建设处于什么阶段，是否翻过车，为什么突然找人搞安全？</p>
<p>A57：<br>我都问部门文化是偏向团体合作还是孤狼型的？有把握就问，如何看待员工的未來发展？</p>
<p>A58：<br>多久调薪，现在的同事都是工作几年？目前贵司对信息安全认为最应该改善是哪方面？原先的信息安全建设情况如何，最大的阻力是哪一方？没有半年，就问：是什么动力支撑你们还在公司呢？</p>
<p>A59：<br>描述一下你工作这几年来对这家公司的印象，你对你现在的工作满意吗？如果面试过程不顺利，可以问问，让对方陷入自我怀疑。</p>
<p>A60：<br>面试官，如果你现在我这个角度，面对这个问题，你会问哪些方面？</p>
<p>A61：<br>只要基于掌握的信息，提出与工作相关的合理问题即可，这个问题不要太过俗套，当然也不能太难，要在一个合理范围内，这个具体就需要候选人自己把控了。</p>
<p>A62：<br>我一般会想了解面试岗位的地位. 环境等具体情况：比如安全团队在公司组织架构中的位置，有多少人. 如何分工，向谁汇报；安全预算有多少，主要项目规模有多大；面试岗位的日常工作内容. 技术要求；岗位的薪资. 福利等。我觉得上述问题可以直接问，也希望面试官直接回答。</p>
<p>A63：<br>大领导， 就问安全理念. 安全文化和后续公司层面的安全建设方向；直属领导，就问这个岗位空出来原因，团队组成和分工，岗位绩效考核标准；谈薪资的领导，就问公司人员流动情况，最近有无裁员情况等等和个人利益相关的。</p>
<p>A64：<br>面某互联网金融公司的时候，面试官说脉脉上说的关于我们公司加班文化都太夸张了，我就问了这周六你们上班吗，然后就没有然后了。</p>
<p>A65：<br>人家不想要你，问题再犀利也没用，想要你，基本都私下谈好，面试走个过场的。</p>
<p>Q：大家作为面试者或面试官的过程中，有哪些好的面试方法？<br>A66：<br>查下公司发展情况，准备倒闭的就别去面试了。查下CIO. CTO. CSO等IT管理者的背景。</p>
<p>A67：<br>放松心态，睡个好觉；面试时注意语速；多观察下面试官的情绪波动。</p>
<p>A68：<br>咖啡厅，朋友一般的聊聊天，然后探讨，由浅入深。</p>
<p>A69：<br>偏技术的岗位，可以考虑在具备靶场或模拟机的环境下，实操一些技术题目；偏管理的岗位，还是传统的面对面的沟通方式。</p>
<p>A70：<br>加候选人微信，从朋友圈获得一些信息。</p>
<p>A71：<br>尽量不开摄像头，面试状态就会好很多。</p>
<p>A72：<br>作为面试者，在面试前通过情报资源搜索公司的详细资料，通过岗位的详细介绍可以大概知道这个岗位今后的工作内容，最后将获得的资料整理成一个工作步骤和一个简易的报告，在面试的时候和面试官探讨这个报告。</p>
<p>A73：<br>曾经作为面试官，问面试者为什么想来我们公司，面试的人说，你们公司工资高，我问，你怎么知道的，面试者说，他通过公积金系统查到的。面试结束。</p>
<p>A74：<br>我觉得，就当聊天的感觉最好，毕竟各有所长，最恶心那种快问快答的。</p>
<p>A75：<br>赞同，比如面试官让你介绍一下做过项目以及碰到的问题和解决思路。你一顿说，说完之后，面试官直接说，好，面试结束，进入下个环节，这种大家怎么看。</p>
<p>A76：<br>我遇到过，面试官准备了一堆八股文，上去就跟我说，咱们快问快答……</p>
<p>A77：<br>我面试别人一般是分成两部分，盘海底和自由发挥。盘海底能够快速省力地判断出对方的大致水平以及有没有触雷点，自由发挥就是让被面试者自由说一些经验较深的场景来判断对方的深度。我基本面别人都是这两个环节。</p>
<p>也碰到过一些面试官喜欢搞一道题式问答，我很不喜欢这种——“你能回答出这个就算通过了”。都是预设了答案的问题。</p>
<p>我记得很久以前面渗透岗时候，对面问了个蜜罐的问题，说有些蜜罐能通过JS抓到你的原始IP，挂代理也没用，这是怎么做到的。我当时白眼都要翻上天了，这什么天顶星JS，怎么不说访问下网站直接我电脑弹计算器了？跳板机CS上线一条龙？风险管理我们一般是参考27001的那一套风险脆弱性评估的。这就是一种非常特化的场景，需要非常谨慎地构建前提条件，但是在面试里很容易就是一句直接过去，无视掉所有条件，这种半桶水式的面试是我非常不喜欢的。</p>
<p>我后面想估计是想问我什么蜜罐方面的新技术或者一些蜜罐的原理，但是这个问法就是一种非常半桶水的感觉。</p>
<p>以前面另一个甲方岗时候感觉他们的架构有问题，当时不懂事，就反问了下，为什么不用xxxxx这种更合理的逻辑，然后把对面问愣了，明显面子挂不住开始找理由。</p>
<p>现在这种话都会说得委婉一点了。</p>
<p>本期话题探讨了在网络安全领域中，针对渗透测试岗位与安全管理岗位面试时的一些考察方法及问题。对于渗透测试岗位，面试官倾向于通过实践操作来检验应聘者的实战能力，例如让他们在一个模拟环境中进行渗透测试，或是提问具体的漏洞利用技术和修复方案。此外，也会考察应聘者对于漏洞原理的理解、常用工具的掌握程度以及在特定场景下的问题解决能力。</p>
<p>而在安全管理岗位的面试中，则更多关注应聘者的理论水平、实践经验、实操能力和心理素质等方面。面试官可能会问及如何构建全面的信息安全管理体系(ISMS)，包括风险评估、政策制定等内容，并探讨应聘者在过去工作中遇到的具体挑战及其解决方案。此外，还会考察应聘者对于法律法规的认知、安全团队的建设和管理等综合能力。</p>
<p>两者的面试都强调了应聘者不仅要具备扎实的技术基础，还需要拥有良好的沟通协调能力，以便于在实际工作中与不同部门协作，推进安全项目的实施。</p>
<p>近期群内答疑解惑<br>Q：员工离职以后电脑数据要清理吗?<br>A1：<br>要，入库前重装系统，全盘格式化。</p>
<p>A2：<br>需要重装吗？直接格式化就完了。</p>
<p>A3：<br>可以不全盘，删账号也可以的，格式化非系统盘。</p>
<p>A4：<br>看他数据后续业务是否需要使用。使用-备份到服务器，再重装系统。</p>
<p>A5：<br>这个得看员工级别，以及在岗时间老实不老实了，要是重点观察的员工要保留一段时间。其实主要看你的领导有没有疑心病什么的。</p>
<p>A6：<br>这信息安全工作越干越具体，直接把IT部门网管都顶替了。</p>
<p>Q：安全产品要给IT开权限么？基础设施运维的，比方说上网行为、管理。<br>A1：<br>如果是不同部门，那就让他邮件给你领导，你领导同意就行。</p>
<p>A2：<br>防病毒和行为管理可以给，DLP的运维可以安装客户端，其他的用户权限控制走流程申请即可，还有一个准入的安装可以给，但是ACL需要走流程。</p>
<p>A3：<br>如果他们拿了这些权限有什么用？帮忙干活对吧。</p>
<p>A4：<br>防病毒很烦，那些人动不动装软件就杀，你给运维能减轻你工作量。不然呢，你还靠他们来审计吗？所以涉及基础的操作的都给运维，信息安全负责审计就得了。</p>
<p>Q：求教企业数据安全的管理方案，目前实现的管控，和老板目视化的要求差的太多了。<br>涉及数据的分类分组，业务及系统Matrix形成分析，数据库访问记录形成分析，员工行为分析。<br>1、理论方面文件已有：数据安全治理的各种方案&#x2F;框架，数据采集、数据传输、数据存储、数据处理、数据交换和数据销毁<br>2、目前已有基本的管理：终端桌管、文件透明加密、ACL、上网行为管理、https、备份<br>A1：<br>可以参考一下数据安全管理办法，编写自己的管理制度。</p>
<p>A2：<br>个人觉得，把问题抛给供应商，根据已有条件，看能否形成一定的解决方案。</p>
<p>A3：<br>你这个需求是要做一个数据安全咨询服务，那找厂商吧。</p>
<p>A4：<br>预算充足就做好数据安全技术+管理+运营一体化，预算不多就买几台设备，完善数据安全管理制度（结合老板的需求）。这是数据生命周期管控的部分，再结合具体业务场景优化。</p>
<p>Q：你们RDP怎么管的？会设置白名单嘛？还是全禁了？<br>A1：<br>RDP，SSH全禁。</p>
<p>A2：<br>全部用堡垒机，不允许开什么SSH，RDP那些玩意。</p>
<p>A3：<br>看业务需求，正常是可以全禁，如果有需求再走特殊申请。</p>
<p>A4：<br>局域网RDP让它随便玩了，外网主要靠发通知。</p>
<p>Q：站在审计监督部的角度，数据安全审计工作应该怎么做呢？<br>A1：<br>行为审计，权限审计。</p>
<p>A2：<br>审计主要看管理制度的合理性，有没有按照制度有效执行吧。</p>
<p>A3：<br>如果是这个角度，才不管你怎么做呢，你只要有制度、有流程、有记录、有技术平台支撑就行。</p>
<p>A4：<br>是的，主要就是审计监督的角度就不是技术了。</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2025/04/17/pantesting-note/">
                渗透笔记
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2025-04-17</span>
            
            
            
                <span class="category">
                    <a href="/categories/渗透/">渗透</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            
        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2025/04/17/pc/">
                PC Room
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2025-04-17</span>
            
            
            
                <span class="category">
                    <a href="/categories/新/">新</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <p>需要技术</p>
<p>macbook 不适合做AI</p>
<h2 id="云操作系统"><a href="#云操作系统" class="headerlink" title="云操作系统"></a>云操作系统</h2><h3 id="Raspberry-Pi"><a href="#Raspberry-Pi" class="headerlink" title="Raspberry Pi"></a>Raspberry Pi</h3><p><a target="_blank" rel="noopener" href="https://github.com/labring/sealos">集群 使用文件管理器Sealos k8s</a><br><a target="_blank" rel="noopener" href="https://sealos.io/">Sealos</a><br><a target="_blank" rel="noopener" href="https://sealos.io/">文件管理器 - casaOS</a></p>
<p><a target="_blank" rel="noopener" href="https://www.kali.org/docs/arm/raspberry-pi-zero-w-p4wnp1-aloa/">Raspberry Pi Zero W P4wnP1 A.L.O.A</a></p>
<h2 id="升降桌DIY"><a href="#升降桌DIY" class="headerlink" title="升降桌DIY"></a>升降桌DIY</h2><p>铝型材 DIY</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1qJHTefE5e/?share_source=copy_web">【DIY双层升降桌！一张桌子却有两张桌面？？】</a><br><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1cL4y1T7fC/?share_source=copy_web">【做工具】 自从有了“多功能电动升降桌”再也不用爬梯子🪜了 转自Kynosys Inventor WoodWorker</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1oWiiYfEkX/?share_source=copy_web">详细教程和材料清单】DIYer的梦中情桌！我做的：双层铝型材电动升降桌 升级版！正装结构更稳！不用切割，上手更简单！你确定不做一张吗？</a></p>
<h2 id="音箱DIY"><a href="#音箱DIY" class="headerlink" title="音箱DIY"></a>音箱DIY</h2><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1VvFrecEww/?share_source=copy_web">1.5寸便携小音箱 -3D打印DIY-</a></p>
<p>音箱 是由喇叭决定的和箱子提及无关</p>
<h2 id="个人语音助手"><a href="#个人语音助手" class="headerlink" title="个人语音助手"></a>个人语音助手</h2><h3 id="语音验证"><a href="#语音验证" class="headerlink" title="语音验证"></a>语音验证</h3><table>
<thead>
<tr>
<th>方案</th>
<th>方法</th>
<th>优点</th>
<th>适用场景</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Vosk + X-vector</strong></td>
<td>离线语音验证</td>
<td>轻量级，树莓派可运行</td>
<td>本地语音助手</td>
</tr>
<tr>
<td><strong>DeepSpeaker (D-vector)</strong></td>
<td>深度学习模型</td>
<td>高准确率</td>
<td>复杂应用，如智能门禁</td>
</tr>
<tr>
<td><strong>ECAPA-TDNN</strong></td>
<td>SOTA 声纹识别</td>
<td>最新算法，高精度</td>
<td>多用户识别</td>
</tr>
</tbody></table>
<h3 id="语音唤醒-（Wake-Word-Detection）"><a href="#语音唤醒-（Wake-Word-Detection）" class="headerlink" title="语音唤醒 （Wake Word Detection）"></a>语音唤醒 （Wake Word Detection）</h3><ul>
<li>需要一个始终在监听的“唤醒词”（如 Siri 监听“Hey Siri”）。</li>
<li>解决方案：<ul>
<li>Porcupine（轻量级，支持离线）</li>
<li>Snowboy（不再维护，但仍可用）</li>
<li>Mycroft Precise（开源，可训练自定义唤醒词）</li>
</ul>
</li>
</ul>
<h3 id="自然语言理解（Natural-Language-Understanding-NLU）"><a href="#自然语言理解（Natural-Language-Understanding-NLU）" class="headerlink" title="自然语言理解（Natural Language Understanding, NLU）"></a>自然语言理解（Natural Language Understanding, NLU）</h3><ul>
<li>解析用户的意图，比如“今天天气怎么样？” → 解析出“查询天气”。</li>
<li>方案：<ul>
<li>Rasa NLU（开源，可离线运行）</li>
<li>Snips NLU（轻量级，但 Snips 已被 Sonos 收购）</li>
<li>OpenAI GPT-4（需要联网，但效果强大）</li>
</ul>
</li>
</ul>
<h3 id="步骤流程"><a href="#步骤流程" class="headerlink" title="步骤流程"></a>步骤流程</h3><p>[麦克风输入]<br>      ↓<br>[Ring Buffer 缓存]<br>      ↓<br>[唤醒词检测]（Porcupine &#x2F; Precise &#x2F; Vosk+KeywordSpotter）<br>      ↓（匹配成功）<br>[提取音频片段]（如1~2秒）<br>      ↓<br>[X-vector 说话人识别]<br>      ↓<br>[身份确认后 → 激活系统 &#x2F; 否则忽略]<br>      ↓<br>[完整语音识别（ASR）: Vosk]</p>
<h2 id="投影仪"><a href="#投影仪" class="headerlink" title="投影仪"></a>投影仪</h2><p>3k<br>坚果呢n1s </p>
<h2 id="PBC"><a href="#PBC" class="headerlink" title="PBC"></a>PBC</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/gitblog_01050/article/details/141013419">制作PBC板</a></p>
<h2 id="3d打印"><a href="#3d打印" class="headerlink" title="3d打印"></a>3d打印</h2><p><a target="_blank" rel="noopener" href="https://makerworld.com/zh/models/1013711?from=search#profileId-993508">GP02A半身像1</a><br><a target="_blank" rel="noopener" href="https://makerworld.com/zh/models/1013735#profileId-993524">GP02A半身像2</a></p>


	<div class="row">
    <embed src="/pdf/GP02A_Assembly_Guide.pdf" width="100%" height="550" type="application/pdf">
	</div>




<p><a target="_blank" rel="noopener" href="https://www.aigei.com/item/3d_da_yin_gao_d.html">3D打印高达模型 06-飞翼</a></p>
<p>开放itx机架</p>
<h3 id="3d建模"><a href="#3d建模" class="headerlink" title="3d建模"></a>3d建模</h3><p>deepseek<br>即梦AI<br>tripo ai</p>
<h3 id="光固化"><a href="#光固化" class="headerlink" title="光固化"></a>光固化</h3><table>
<thead>
<tr>
<th><strong>类别</strong></th>
<th><strong>项目</strong></th>
</tr>
</thead>
<tbody><tr>
<td>🖨️ <strong>主要设备</strong></td>
<td>光固化 3D 打印机 (SLA&#x2F;DLP&#x2F;LCD)</td>
</tr>
<tr>
<td></td>
<td>紫外固化灯箱 (UV Curing Box)</td>
</tr>
<tr>
<td></td>
<td>清洗设备 (超声波清洗机、清洗桶)</td>
</tr>
<tr>
<td>🧴 <strong>材料与消耗品</strong></td>
<td>光敏树脂 (标准树脂、柔性树脂、透明树脂、铸造树脂等)</td>
</tr>
<tr>
<td></td>
<td>FEP 膜 (需定期更换)</td>
</tr>
<tr>
<td></td>
<td>树脂槽 (Resin Vat)</td>
</tr>
<tr>
<td></td>
<td>打印平台 (Build Plate)</td>
</tr>
<tr>
<td>🔧 <strong>后处理工具</strong></td>
<td>清洗液 (IPA 异丙醇)</td>
</tr>
<tr>
<td></td>
<td>刷子、刮刀、镊子、钳子</td>
</tr>
<tr>
<td></td>
<td>砂纸、打磨工具、模型修补工具</td>
</tr>
<tr>
<td>🛠️ <strong>维护配件</strong></td>
<td>备用 LCD 屏、UV 灯、Z 轴润滑剂</td>
</tr>
<tr>
<td></td>
<td>备用 FEP 膜、备用树脂槽</td>
</tr>
<tr>
<td></td>
<td>风扇或过滤装置 (提升安全性和打印环境)</td>
</tr>
<tr>
<td>🧰 <strong>安全设备与工具</strong></td>
<td>一次性手套、护目镜、口罩</td>
</tr>
<tr>
<td></td>
<td>模型支撑移除工具、模型表面修复工具</td>
</tr>
<tr>
<td>💡 <strong>软件与数字工具</strong></td>
<td>切片软件 (Chitubox、Lychee、PrusaSlicer)</td>
</tr>
<tr>
<td></td>
<td>3D 建模软件 (Blender、ZBrush、Fusion 360)</td>
</tr>
<tr>
<td></td>
<td>打印机固件和控制软件 (如 OctoPrint)</td>
</tr>
</tbody></table>
<h4 id="珠宝"><a href="#珠宝" class="headerlink" title="珠宝"></a>珠宝</h4><p>光敏铸造树脂<br>种蜡树<br>倒石膏<br>然后铸造</p>
<h2 id="Flipper-Zero"><a href="#Flipper-Zero" class="headerlink" title="Flipper Zero"></a>Flipper Zero</h2><p><a target="_blank" rel="noopener" href="https://www.freebuf.com/sectool/385317.html">Flipper Zero 入门到升华（一）</a></p>
<h2 id="esp8266"><a href="#esp8266" class="headerlink" title="esp8266"></a>esp8266</h2><h3 id="java"><a href="#java" class="headerlink" title="java"></a>java</h3><p><a target="_blank" rel="noopener" href="https://help.jimureport.com/">大屏幕</a></p>
<h3 id="vpn-服务"><a href="#vpn-服务" class="headerlink" title="vpn 服务"></a>vpn 服务</h3><p>WireGuard Dashboard<br>WireGuard-UI 安装和配置</p>
<p><a target="_blank" rel="noopener" href="https://github.com/WireGuard/wireguard-go">https://github.com/WireGuard/wireguard-go</a></p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2025/04/17/php-interview/">
                PHP 面试题
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2025-04-17</span>
            
            
            
                <span class="category">
                    <a href="/categories/面试/">面试</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <ul>
<li><a href="#1">PHP</a><ul>
<li><a href="#1.1">运行模式</a></li>
<li><a href="#1.2">Nginx与Apache解析php文件</a></li>
<li><a href="#1.3">设计模式</a></li>
<li><a href="#1.4">Session与Cookie</a></li>
<li><a href="#1.5">闭包</a></li>
<li><a href="#1.6">单双引号区别</a></li>
<li><a href="#1.7">include和require的区别</a></li>
</ul>
</li>
<li><a href="#2">PHP优化与高并发</a><ul>
<li><a href="#2.1">优化方案</a></li>
<li><a href="#2.2">PSR-4代码规范</a></li>
<li><a href="#2.3">微服务</a></li>
<li><a href="#2.4">抽象类与接口区别</a></li>
<li><a href="#2.5">垃圾回收机制</a></li>
<li><a href="#2.6">高并发优化</a></li>
</ul>
</li>
<li><a href="#3">Mysql</a><ul>
<li><a href="#3.1">myisam和innodb区别以及事务四大特性</a></li>
<li><a href="#3.2">mysql索引</a></li>
<li><a href="#3.3">主从-分库分表-锁</a></li>
<li><a href="#3.4">如何定位慢查询</a></li>
</ul>
</li>
<li><a href="#4">MongoDB</a> </li>
<li><a href="#5">Redis</a><ul>
<li><a href="#5.1">Redis和Memcache区别</a></li>
<li><a href="#5.2">Redis常见数据结构</a></li>
<li><a href="#5.3">Redis缓存雪崩、缓存穿透、缓存击穿</a></li>
<li><a href="#5.4">Redis淘汰策略</a> </li>
<li><a href="#5.5">Redis分布式锁怎么实现</a></li>
<li><a href="#5.6">Redis的持久化机制:RDB-vs-AOF</a></li>
<li><a href="#5.7">Redis主从哨兵和集群的区别</a></li>
<li><a href="#5.8">节点扩容不同</a></li>
</ul>
</li>
<li><a href="#6">MQ</a><ul>
<li><a href="#6.1">RabbitMQ,RocketMQ,Kafka区别</a></li>
</ul>
</li>
<li><a href="#7">服务器&amp;其它方面</a>  <ul>
<li><a href="#7.1">swoole</a></li>
<li><a href="#7.2">phpunit</a></li>
<li><a href="#7.3">php-cs-fixer</a></li>
<li><a href="#7.4">docker多版本启动共用</a></li>
</ul>
</li>
</ul>
<h2 id="php面试题"><a href="#php面试题" class="headerlink" title="php面试题"></a>php面试题</h2><h3 id="1">PHP</h3>
<h4 id="1.1">运行模式</h4>


<ul>
<li>CGI（通用网关接口&#x2F; Common Gateway Interface）</li>
<li>FastCGI（常驻型CGI &#x2F; Long-Live CGI）lamp</li>
<li>CLI（命令行运行 &#x2F; Command Line Interface）</li>
<li>Web模块模式（Apache等Web服务器运行的模式）</li>
<li>ISAPI（Internet Server Application Program Interface）</li>
</ul>
<h4 id="1.2">Nginx与Apache解析php文件</h4>

<ul>
<li>php是apache的一个模块，必须依靠web服务器才可以运行，在php引擎解析php文件，php引擎将html页面带给web服务器解析并返回客户端</li>
<li>cgi与fastcgi协议，CGI common gateway interface, CGI缺点，每处理一个请求都要fork一个全新的进程，就有了fastCGI，一个进程内可以处理多个请求</li>
<li>phpCGI是fastCGI管理器，后面就用了FPM已经集成到了php里(php-fpm进程管理)</li>
<li>php-fpm监听的事socket文件，nginx通过location将所有php文件交给fpm处理</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">default.conf</span><br><span class="line">location ~ |.php<span class="variable">$&#123;</span></span><br><span class="line"><span class="variable">	include fastcgi_params</span></span><br><span class="line"><span class="variable">&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="1.3"><a rel="https://refactoringguru.cn/design-patterns/php">设计模式（三大类）</a></h4>

<ul>
<li>创建型模式共五种：工厂方法模式、抽象工厂模式、单例模式、建造者模式、原型模式。</li>
<li>结构型模式共七种：适配器模式、装饰器模式、代理模式、外观模式、桥接模式、组合模式、享元模式</li>
<li>行为型模式共十一种：策略模式、模板方法模式、观察者模式、迭代子模式、责任链模式、命令模式、备忘录模式、状态模式、访问者模式、中介者模式、解释器模式</li>
</ul>
<h4 id="1.4">Session与Cookie</h4>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">cookie 客户端，保存用户信息的一种机制，</span><br><span class="line">Session 服务端，跟踪用户状态，保存用户会话</span><br><span class="line"></span><br><span class="line"><span class="comment"># 有效期上不同</span></span><br><span class="line">Cookie  开发可以通过设置cookie的属性，达到使cookie长期有效的效果。</span><br><span class="line">Session  session依赖于名为JSESSIONID的cookie，而cookie JSESSIONID的过期时间默认为-1，只需关闭窗口该session就会失效，因而session不能达到长期有效的效果</span><br><span class="line"></span><br><span class="line"><span class="comment"># 跨域</span></span><br><span class="line">cookie 支持跨域名访问。</span><br><span class="line">session 不支持跨域名访问。</span><br><span class="line"></span><br><span class="line"><span class="comment"># 什么是CSRF攻击，XSS攻击</span></span><br><span class="line">CSRF （Cross-site request forgery）跨站请求伪造,黑客建立一个伪造网站或发送邮箱带了一个正常URL链接来让正常用户访问，来让正常用户让自己浏览器里的COOKIE权限来执行一些非法请求，</span><br><span class="line">如转账，提权等操作</span><br><span class="line">!! 防范方法有，验证 HTTP Referer 字段；在请求地址中添加 token 并验证</span><br><span class="line"></span><br><span class="line">XSS 主要将XSS代码提交存储在服务器端（数据库，内存，文件系统等），下次请求目标页面时不用再提交XSS代码。当目标用户访问该页面获取数据时，XSS代码会从服务器解析之后加载出来，返回到浏览器做正常的HTML和JS解析执行，XSS攻击就发生了</span><br><span class="line">!! 防范方法:通过过滤是针对非法的HTML代码包括单双引号等，使用htmlspecialchars()函数</span><br></pre></td></tr></table></figure>

<h4 id="1.5">闭包</h4>
内部函数可以访问外部函数
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">init</span></span>() &#123;</span><br><span class="line">  var name = <span class="string">&quot;Mozilla&quot;</span>; // name 是一个被 init 创建的局部变量</span><br><span class="line">  <span class="keyword">function</span> <span class="function"><span class="title">displayName</span></span>() &#123;</span><br><span class="line">    // displayName() 是内部函数，一个闭包</span><br><span class="line">    alert(name); // 使用了父函数中声明的变量</span><br><span class="line">  &#125;</span><br><span class="line">  displayName();</span><br><span class="line">&#125;</span><br><span class="line">init();</span><br></pre></td></tr></table></figure>

<h4 id="1.6">双引号和单引号的区别</h4>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">“<span class="variable">$aaa</span>” 解释变量</span><br><span class="line">‘<span class="variable">$ccc</span>’ 不解释变量</span><br></pre></td></tr></table></figure>
<h4 id="1.7">include和require的区别</h4>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">require 首先执行，报错会终止程序</span><br><span class="line">include 如果包含的，报错会提示，继续执行下去</span><br></pre></td></tr></table></figure>
<h3 id="2">PHP优化与高并发</h3>
<h4 id="2.1">优化方案</h4>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. <span class="built_in">unset</span>(); <span class="comment"># 注销那些不用的变量尤其是大数组，以便释放内存</span></span><br><span class="line">2. str_replace函数比preg_replace函数快，但strtr函数的效率是str_replace函数的四倍</span><br><span class="line">3. 尽量不要在<span class="keyword">for</span>循环中使用函数，比如<span class="keyword">for</span> (<span class="variable">$x</span>=0; <span class="variable">$x</span> &lt; count(<span class="variable">$array</span>); <span class="variable">$x</span>)每循环一次都会调用count()函数</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="2.2">PSR-4代码规范</h4>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">composer如何实现？PSR-4是什么?</span><br><span class="line">1. 自动加载有两种方式（都是php内置的），一种是通过__autoload(),另一种是通过spl_autoload_register()。</span><br><span class="line"></span><br><span class="line">2.PSR是PHP Standards Recommendation的简称,制定的代码规范，简称PSR，是代码开发的事实标准</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="2.3">抽象类与接口区别</h4>


<table>
<thead>
<tr>
<th>特性</th>
<th>抽象类</th>
<th>接口</th>
</tr>
</thead>
<tbody><tr>
<td>用于声明某一种事物，规范名称、参数，形成模块，未有详细的实现细节</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>通过类来实现相关的细节工作</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>抽象类的抽象方法与接口一样</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>可继承</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>有属性、普通方法、抽象方法</td>
<td>✅</td>
<td>❌只有常量</td>
</tr>
<tr>
<td>抽象方法</td>
<td>❌不一定要有抽象方法</td>
<td>✅</td>
</tr>
<tr>
<td>语法不同</td>
<td>❌</td>
<td>❌</td>
</tr>
<tr>
<td>声明不同</td>
<td>abstract关键字在类前声明，且有class声明为类</td>
<td>用interface来声明，但不能用class来声明</td>
</tr>
<tr>
<td>继承</td>
<td>extends关键字让子类继承父类后，在子类实现详细的抽象方法</td>
<td>用implements让普通类在类里实现接口的详细方法，且接口可以一次性实现多个方法，用逗号分开各个接口就可</td>
</tr>
</tbody></table>
<p>抽象类与接口的结合</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php </span><br><span class="line">/* </span><br><span class="line">写此程序源于自己的猜测，想在抽象类里实现某一接口。 </span><br><span class="line">*/ </span><br><span class="line">interface work&#123; </span><br><span class="line">  public <span class="keyword">function</span> say(); </span><br><span class="line">&#125;</span><br><span class="line">abstract class a implements work&#123; </span><br><span class="line">  public <span class="keyword">function</span> <span class="function"><span class="title">showlove</span></span>()&#123; </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;love you&lt;br / &#x27;</span>; </span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br><span class="line">class b extends a&#123; </span><br><span class="line">  public <span class="keyword">function</span> <span class="function"><span class="title">say</span></span>()&#123; </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;hello, i m in b&#x27;</span>; </span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$k</span>=new b(); </span><br><span class="line"><span class="variable">$k</span>- say();</span><br><span class="line">/* </span><br><span class="line">以上程序能正常执行</span><br><span class="line">普通类implements接口后，就变成了抽象类了，这就好像是直接给抽象类增加了一个抽象方法。</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<p>接口与继承的结合</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">interface kk&#123; </span><br><span class="line">  public <span class="keyword">function</span> say(); </span><br><span class="line">&#125;</span><br><span class="line">class a &#123; </span><br><span class="line">  public <span class="keyword">function</span> <span class="function"><span class="title">show</span></span>()&#123; </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;我是父类&lt;br / &#x27;</span>; </span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br><span class="line">class b extends a implements kk&#123; </span><br><span class="line">  public <span class="keyword">function</span> <span class="function"><span class="title">say</span></span>()&#123; </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;我是继承A类，同时实现say接口的&lt;br / &#x27;</span>; </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$b</span>=new b(); </span><br><span class="line"><span class="variable">$b</span>- show();//我是父类</span><br><span class="line"><span class="variable">$b</span>- say();//我是继承A类，同时实现say接口的</span><br></pre></td></tr></table></figure>

<h4 id="2.4">微服务</h4>

<p>优势：</p>
<ul>
<li>独立开发 – 所有微服务都可以根据各自的功能轻松开发</li>
<li>独立部署 – 基于其服务，可以在任何应用程序中单独部署它们</li>
<li>故障隔离 – 即使应用程序的一项服务不起作用，系统仍可继续运行</li>
<li>混合技术堆栈 – 可以使用不同的语言和技术来构建同一应用程序的不同服务</li>
<li>粒度缩放 – 单个组件可根据需要进行缩放，无需将所有组件缩放在一起</li>
</ul>
<p>特点：</p>
<ul>
<li>解耦 – 系统内的服务很大程度上是分离的。因此，整个应用程序可以轻松构建，更改和扩展</li>
<li>组件化 – 微服务被视为可以轻松更换和升级的独立组件</li>
<li>业务能力 – 微服务非常简单，专注于单一功能</li>
<li>自治 – 开发人员和团队可以彼此独立工作，从而提高速度</li>
<li>持续交付 – 通过软件创建，测试和批准的系统自动化，允许频繁发布软件</li>
<li>责任 – 微服务不关注应用程序作为项目。相反，他们将应用程序视为他们负责的产品</li>
<li>分散治理 – 重点是使用正确的工具来做正确的工作。这意味着没有标准化模式或任何技术模式。开发人员可以自由选择最有用的工具来解决他们的问题</li>
<li>敏捷 – 微服务支持敏捷开发。任何新功能都可以快速开发并再次丢弃</li>
</ul>
<h4 id="2.5">垃圾回收机制</h4>

<ul>
<li>PHP垃圾回收机制</li>
</ul>
<p><code>PHP5.3版本</code>之前,使用的垃圾回收机制是单纯的“引用计数”<br>但是当两个或多个对象互相引用形成环状后，内存对象的计数器则不会消减为0,<br>这一组内存对象已经没用了，但是不能回收，从而导致内存泄露的现象<br>每个php变量存在一个叫”zval”的变量容器中。一个zval变量容器，除了包含变量的类型和值</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xdebug_debug_zval( <span class="string">&#x27;a&#x27;</span> ); <span class="comment"># Xdebug来检查引用计数情况</span></span><br></pre></td></tr></table></figure>
<p>从<code>PHP7的NTS版本</code>开始，以上例程的引用将不再被计数<br>对于null，bool，int和double的类型变量，refcount永远不会计数；<br>对于对象、资源类型，refcount计数和php5的一致；<br>字符串引用，计数不变，&amp;地址发生改变<br>数组引用，键值不变的情况下计数<br>改变后引用全部作废，重新计算</p>
<ul>
<li>回收周期</li>
</ul>
<p><code>zend.enable_gc</code><code>php.ini</code>默认是打开的</p>
<ul>
<li>性能影响</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/benbenhan/articles/15904812.html">https://www.cnblogs.com/benbenhan/articles/15904812.html</a><br><a target="_blank" rel="noopener" href="https://docs.kilvn.com/tipi/chapt06/06-04-00-garbage-collection.html">https://docs.kilvn.com/tipi/chapt06/06-04-00-garbage-collection.html</a><br><a target="_blank" rel="noopener" href="https://xz.aliyun.com/t/11843?time__1311=Cq0xuD0DnD203GNem=DRiKKpc8Q7W4D">https://xz.aliyun.com/t/11843?time__1311=Cq0xuD0DnD203GNem%3DDRiKKpc8Q7W4D</a></p>
<h4 id="2.6">高并发优化</h4>

<ul>
<li>流量优化 - 防盗链处理</li>
<li>前端优化<ol>
<li>减少http请求次数</li>
<li>添加异步请求</li>
<li>启用浏览器缓存和文件压缩</li>
<li>CDN加速</li>
<li>建立独立的图片服务器(减少I&#x2F;O)</li>
</ol>
</li>
<li>服务端优化<ol>
<li>页面静态化</li>
<li>并发处理</li>
<li>队列处理</li>
</ol>
</li>
<li>数据库优化<ol>
<li>数据库缓存</li>
<li>分库分表,分区</li>
<li>读写分离</li>
<li>负载均衡</li>
</ol>
</li>
<li>web服务器优化<ol>
<li>nginx反向代理实现负载均衡</li>
<li>lvs实现负载均衡</li>
</ol>
</li>
</ul>
<h3 id="3">Mysql</h3>
<h4 id="3.1">myisam和innodb区别以及事务四大特性</h4>

<h4 id="3.2">mysql索引</h4>

<blockquote>
<p>从数据结构角度</p>
</blockquote>
<ul>
<li>B+树索引(O(log(n)))：关于B+树索引，可以参考 MySQL索引背后的数据结构及算法原理</li>
<li>hash索引：</li>
</ul>
<blockquote>
<p>从物理存储角度</p>
</blockquote>
<ul>
<li>聚集索引（clustered index）</li>
<li>非聚集索引（non-clustered index）</li>
</ul>
<blockquote>
<p>从逻辑角度</p>
</blockquote>
<ul>
<li>主键索引：主键索引是一种特殊的唯一索引，不允许有空值</li>
<li>普通索引或者单列索引</li>
<li>多列索引（复合索引）：复合索引指多个字段上创建的索引，只有在查询条件中使用了创建索引时的第一个字段，索引才会被使用。使用复合索引时遵循最左前缀集合</li>
<li>唯一索引或者非唯一索引</li>
<li>空间索引：空间索引是对空间数据类型的字段建立的索引</li>
</ul>
<h4 id="3.3">主从-分区分表分库</h4>

<ul>
<li>分库：是为了解决数据库连接资源不足问题，和磁盘IO的性能瓶颈问题。</li>
<li>分表：是为了解决单表数据量太大，sql语句查询数据时，即使走了索引也非常耗时问题。此外还可以解决消耗cpu资源问题。</li>
<li>分库分表：可以解决 数据库连接资源不足、磁盘IO的性能瓶颈、检索数据耗时 和 消耗cpu资源等问题。</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://github.com/DavidSuperM/davidsuperm.github.io/blob/master/DB/mysql%E5%88%86%E5%8C%BA%E5%88%86%E8%A1%A8%E5%88%86%E5%BA%93%E6%96%B9%E6%A1%88.md">https://github.com/DavidSuperM/davidsuperm.github.io/blob/master/DB/mysql%E5%88%86%E5%8C%BA%E5%88%86%E8%A1%A8%E5%88%86%E5%BA%93%E6%96%B9%E6%A1%88.md</a></p>
<h4 id="3.4">如何定位慢查询</h4>

<ol>
<li>首先确认是否开启了慢查询</li>
<li>设置慢查询的时间限制</li>
<li>查询慢查询日志可定位具体的慢sql</li>
<li>相关sql查询</li>
<li>用Explain分析具体的sql语句</li>
</ol>
<h3 id="5">Redis</h3>
<h4 id="5.2">Redis常见数据结构</h4>

<p>最常用的的有5种,字符串(String)、哈希(Hash)、列表(list)、集合(set)、有序集合(ZSET)</p>
<blockquote>
<p>元素唯一性：set中不允许重复的成员，而zset中不允许重复的成员，但是允许不同成员拥有相同的分数</p>
</blockquote>
<h4 id="5.3">Redis缓存雪崩、缓存穿透、缓存击穿</h4>


<ul>
<li><p>缓存雪崩<br>大量用户请求，全部转向请求访问数据库，压力剧增，可能导致数据库宕机，造成系统崩溃，造成缓存雪崩</p>
</li>
<li><p>缓存击穿<br>业务中几个数据会频繁访问，比如秒杀数据，被称为热点数据<br>如果某个热点数据过期了，此时大量用户请求，无法从缓存中读取，直接访问数据库，造成系统奔溃，缓存击穿</p>
</li>
<li><p>缓存穿透<br>当用户访问数据，既不在缓存中，也不在数据库，导致请求缓存时，发现缓存缺失，发现两者都没找到，没法构建缓存，</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>缓存异常</th>
<th>产生原因</th>
<th>应对方案</th>
</tr>
</thead>
<tbody><tr>
<td>缓存雪崩</td>
<td>大量数据同时过期</td>
<td>1.均匀设置过期时间 - 过期时间后加随机数，保证不会再同一时间过期 </br>  2.互斥锁 - 保证同一时间只有一个请求来构建缓存 </br> 3.后台更新缓存</td>
</tr>
<tr>
<td></td>
<td>Redis 故障宕机</td>
<td>1.服务熔断或请求限流机制 </br>  2.构建 Redis 缓存高可靠集群</td>
</tr>
<tr>
<td>缓存击穿</td>
<td>热点数据过期</td>
<td>1.互斥锁 </br> 2.不给热点数据设置过期时间，由后台异步更新缓存</td>
</tr>
<tr>
<td>缓存穿透</td>
<td>访问的数据既不在缓存，也不在数据库</td>
<td>1.非法请求 </br> 2.缓存空值或者默认值 </br> 3.使用布隆过滤器快速判断数据是否存在</td>
</tr>
</tbody></table>
<h4 id="5.4">Redis淘汰策略</h4>
<h4 id="5.5">Redis分布式锁怎么实现</h4>
<h4 id="5.6">Redis的持久化机制:RDB-vs-AOF</h4>
<h4 id="5.7">Redis主从哨兵和集群的区别</h4>
<h4 id="5.8">节点扩容不同</h4>


<h3 id="6">MQ</h3>
<h4 id="6.1">RabbitMQ,RocketMQ,Kafka区别</h4>


<table>
<thead>
<tr>
<th>MQ消息队列</th>
<th>优点</th>
<th>缺点</th>
</tr>
</thead>
<tbody><tr>
<td>RabbitMQ</td>
<td>轻量级、容易部署和使用、支持多种客户端开发语言、支持灵活的路由配置</td>
<td>对消息堆积的支持并不好、性能和吞吐量较差、使用 Erlang 语言编写，比较难进行二次开发</td>
</tr>
<tr>
<td>RocketMQ</td>
<td>性能好、稳定可靠、有活跃的中文社区、使用 Java 开发，容易进行二次开发、特点响应快</td>
<td>兼容性较差</td>
</tr>
<tr>
<td>Kafka</td>
<td>兼容性极好、设计上大量使用了批量和异步的思想，有超高的性能</td>
<td>由于 “先攒一波再一起处理” 的设计，时延较高，不太适合在线业务场景</td>
</tr>
</tbody></table>
<h3 id="7">服务器&其它方面</h3>
<h4 id="7.1">swoole</h4>

<p>Swoole是一个面向生产环境的PHP 异步网络通信引擎，使PHP 开发人员可以编写高性能的异步并发TCP、UDP、Unix Socket、HTTP，WebSocket 服务</p>
<h4 id="7.2">phpunit</h4>

<p>PHPUnit 是 PHP 程式语言中最常见的单元测试 (unit testing) 框架，PHPUnit 是参考 xUnit 架构利用 PHP 实作出来。</p>
<ol>
<li>针对类 Example 的测试写在类 ExampleTest 中, ExampleTest 继承自 TestCase</li>
<li>对于方法的测试命名为 test* 的公用方法</li>
<li>在测试方法内，类似于 assertEquals() 的断言方法用来对实际值和预期值的匹配做出验证</li>
</ol>
<h4 id="7.3">php-cs-fixer</h4>

<p>php-cs-fixer 是个代码格式化工具，格式化的标准是 PSR-1、PSR-2 以及一些 symfony 的标准。</p>
<ul>
<li>–verbose 用于展示应用了的规则<blockquote>
<p>–verbose</p>
</blockquote>
</li>
<li>–using-cache 不使用缓存<blockquote>
<p>–using-cache&#x3D;no</p>
</blockquote>
</li>
<li>–config 指定配置文件<blockquote>
<p>–config&#x3D;.php-cs-fixer.php</p>
</blockquote>
</li>
<li>–level 用于控制需要使用的规则层级（默认psr2）<blockquote>
<p>–level&#x3D;psr0<br>–level&#x3D;psr1<br>–level&#x3D;psr2<br>–level&#x3D;symfony</p>
</blockquote>
</li>
<li>–fixers 默认情况下执行的是 PSR-2 的所有选项以及一些附加选项（主要是 symfony 相关的）。还有一些属于『贡献级别』的选项，你可以通过 –fixers 选择性的添加，–fixers 的多个条件要用逗号分开<blockquote>
<p>–fixers&#x3D;linefeed,short_tag,indentation</p>
</blockquote>
</li>
<li>-name_of_fixer 设定禁用哪些选项。如果同时设定了 –fixers 和 -name_of_fixer，前者的优先级更高</li>
<li>–dry-run 和 –diff 可以显示出需要修改的汇总，但是并不实际修改<blockquote>
<p>.&#x2F;vendor&#x2F;bin&#x2F;php-cs-fixer fix –verbose –diff –dry-run</p>
</blockquote>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="comment"># vendor/bin/php-cs-fixer fix --config=.php-cs-fixer.dist.php --dry-run --diff</span></span><br><span class="line"><span class="comment"># vendor/bin/php-cs-fixer fix --config=.php-cs-fixer.dist.php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$finder</span> = PhpCsFixer\Finder::create()</span><br><span class="line">    -&gt;<span class="keyword">in</span>(__DIR__)</span><br><span class="line">    -&gt;name(<span class="string">&#x27;*.php&#x27;</span>)</span><br><span class="line">    -&gt;notName(<span class="string">&#x27;*.blade.php&#x27;</span>); // 排除一些文件类型</span><br><span class="line"></span><br><span class="line"><span class="built_in">return</span> (new PhpCsFixer\Config())</span><br><span class="line">    -&gt;setUsingCache(<span class="literal">false</span>)  // 禁用缓存</span><br><span class="line">    -&gt;setRules([</span><br><span class="line">        <span class="string">&#x27;@PSR12&#x27;</span> =&gt; <span class="literal">true</span>,                      // 使用 PSR-12 标准</span><br><span class="line">        <span class="string">&#x27;no_unused_imports&#x27;</span> =&gt; <span class="literal">true</span>,            // 移除未使用的导入</span><br><span class="line">        <span class="string">&#x27;standardize_not_equals&#x27;</span> =&gt; <span class="literal">true</span>,       // 使用 `!==` 而不是 `&lt;&gt;`</span><br><span class="line">        <span class="string">&#x27;array_indentation&#x27;</span> =&gt; <span class="literal">true</span>,            // 数组缩进一致</span><br><span class="line">        <span class="string">&#x27;binary_operator_spaces&#x27;</span> =&gt; [<span class="string">&#x27;default&#x27;</span> =&gt; <span class="string">&#x27;align&#x27;</span>],  // 二元运算符对齐</span><br><span class="line">        <span class="string">&#x27;no_extra_blank_lines&#x27;</span> =&gt; <span class="literal">true</span>,         // 删除多余空行</span><br><span class="line">        <span class="string">&#x27;visibility_required&#x27;</span> =&gt; [<span class="string">&#x27;elements&#x27;</span> =&gt; [<span class="string">&#x27;property&#x27;</span>, <span class="string">&#x27;method&#x27;</span>]],  // 强制声明可见性</span><br><span class="line">        <span class="string">&#x27;no_trailing_whitespace&#x27;</span> =&gt; <span class="literal">true</span>,       // 删除行尾空白</span><br><span class="line">        <span class="string">&#x27;linebreak_after_opening_tag&#x27;</span> =&gt; <span class="literal">true</span>,  // 在 PHP 开标签后换行</span><br><span class="line">        <span class="string">&#x27;cast_spaces&#x27;</span> =&gt; [<span class="string">&#x27;space&#x27;</span> =&gt; <span class="string">&#x27;single&#x27;</span>], // 类型转换间隔为单空格</span><br><span class="line">        <span class="string">&#x27;align_multiline_comment&#x27;</span> =&gt; <span class="literal">true</span>,      // 多行注释对齐</span><br><span class="line">        <span class="string">&#x27;ternary_operator_spaces&#x27;</span> =&gt; <span class="literal">true</span>,      // 三元运算符间空格</span><br><span class="line">        <span class="string">&#x27;no_blank_lines_after_phpdoc&#x27;</span> =&gt; <span class="literal">true</span>,  // PHPDoc 后不允许空行</span><br><span class="line">        <span class="string">&#x27;method_argument_space&#x27;</span> =&gt; [<span class="string">&#x27;on_multiline&#x27;</span> =&gt; <span class="string">&#x27;ensure_fully_multiline&#x27;</span>],  // 方法参数一致性</span><br><span class="line">    ])</span><br><span class="line">    -&gt;setFinder(<span class="variable">$finder</span>);</span><br></pre></td></tr></table></figure>

<h4 id="7.4">docker多版本启动共用</h4>


        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2025/04/17/golang-structure/">
                Golang 深浅
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2025-04-17</span>
            
            
            
                <span class="category">
                    <a href="/categories/后端/">后端</a>
                </span>
            
        </div>
    </div>

    
        <div class="content">
            <!-- * [基础](#1)
    * [进程、线程、Goroutine(协程)区别](#1.1)
    * [make和new区别](#1.2)
    * [数组和切片区别](#1.3)
* [GMP协程调度器](#2)
    * [调度器策略](#2.1)
    * [调度器的生命周期](#2.2)
* [并发 sync](#3)
    * [通道 - channel](#3.1)
    * [互斥锁 Mutex 与 读写锁 RWMutex 区别](#3.2)
    * [并发Map - sync.Map](#3.3)
    * [线程池 - sync.Pool](#3.4)
* [内存](#4)
    * [CG](#4.1)
* [微服务之间通信方式 rpc Grpc http](#4) -->

<h3 id="1">基础</h3>

<p><a target="_blank" rel="noopener" href="https://s1nec-1o.github.io/2024/04/28/GO-Pwn/">GO-PWN</a></p>

        </div>
    

</div>
            
        </section>
    </div>
</div>



    <div class="row">
        <div class="col-sm-12">
            <div class="wrap-pagination">
                <a class="" href="/page/2/">
                    <i class="fa fa-chevron-left" aria-hidden="true"></i>
                </a>
                <a class="" href="/page/4/">
                    <i class="fa fa-chevron-right" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </div>




</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    Respect All Fear None. 
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2025/04/17/php-structure/">PHP框架</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2025/04/17/pressure-testing/">压测工具集合</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2025/04/17/redis/">Redis</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2025/04/17/raspberry-pi/">Raspberry Pi 树莓派</a>
            </li>
            
        </ul>
    </div>



            
<div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 footer-categories">
    <h2>Categories</h2>
    <ul>
        
        <li>
            <a class="footer-post" href="/categories/%E7%A7%BB%E5%8A%A8%E7%AB%AF/">移动端</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/Blog/">Blog</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/%E7%9F%A5/">知</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/%E8%AF%AD%E8%A8%80/">语言</a>
        </li>
        
    </ul>
</div>

        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://github.com/klugjo/hexo-theme-alpha-dust">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://twitter.com/?lang=en">
                            <span class="footer-icon-container">
                                <i class="fa fa-twitter"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://www.facebook.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-facebook"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://www.instagram.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-instagram"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://dribbble.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-dribbble"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://telegram.org/">
                            <span class="footer-icon-container">
                                <i class="fa fa-telegram"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://www.behance.net/">
                            <span class="footer-icon-container">
                                <i class="fa fa-behance"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://500px.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-500px"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    <li class="list-inline-item">
                        <a href="\#">
                            <span class="footer-icon-container">
                                <i class="fa fa-rss"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    @4ck. All right reserved | Design & Hexo 0rz33
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->

<script src="/js/main.js"></script>


<!-- Searching -->
<!-- <script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script> -->

<script src="/js/search.js"></script>


<!-- Mermaid -->
<script src="https://unpkg.com/mermaid@10/dist/mermaid.min.js"></script>
<script>
  if (window.mermaid) {
    mermaid.initialize({theme: 'dark'});
  }
</script>

<!-- Disqus Comments -->



</body>

</html>